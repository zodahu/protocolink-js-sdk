import { LendingProtocol } from './lending-protocol';
import { Portfolio } from 'src/protocol.portfolio';
import * as common from '@protocolink/common';
import { expect } from 'chai';
import { filterPortfolio } from 'src/protocol.utils';

describe('Test Aave V3 LendingProtocol', function () {
  context('Test getPortfolio', function () {
    const testCases = [
      {
        chainId: common.ChainId.mainnet,
        account: '0xAF06acFD1BD492B913d5807d562e4FC3A6343C4E',
        blockTag: 20150000,
        expected: {
          chainId: 1,
          protocolId: 'aave-v3',
          marketId: 'mainnet',
          utilization: '0.00002024122263864696',
          healthRate: '51380.28587316745056589137',
          netAPY: '0.04976586227359226954',
          totalSupplyUSD: '0.05386828021262276115535692',
          totalBorrowUSD: '0.00000081777075911847564974',
          supplies: [
            {
              token: {
                chainId: 1,
                address: '0x0000000000000000000000000000000000000000',
                decimals: 18,
                symbol: 'ETH',
                name: 'Ethereum',
                logoUri: 'https://cdn.furucombo.app/assets/img/token/ETH.png',
              },
              price: '3494.6068',
              balance: '0',
              apy: '0.01813810601622420684',
              lstApy: '0',
              grossApy: '0.01813810601622420684',
              usageAsCollateralEnabled: true,
              ltv: '0.805',
              liquidationThreshold: '0.83',
              isNotCollateral: false,
              supplyCap: '1800000',
              totalSupply: '848287.363943058282550599',
            },
            {
              token: {
                chainId: 1,
                address: '0x7f39C581F595B53c5cb19bD0b3f8dA6c935E2Ca0',
                decimals: 18,
                symbol: 'wstETH',
                name: 'Wrapped liquid staked Ether 2.0',
                logoUri: 'https://cdn.furucombo.app/assets/img/token/wstETH.png',
              },
              price: '4090.63672006',
              balance: '0.000000000300005282',
              apy: '0.00002121674793396259',
              lstApy: '0.0302',
              grossApy: '0.03022121674793396259',
              usageAsCollateralEnabled: true,
              ltv: '0.785',
              liquidationThreshold: '0.81',
              isNotCollateral: false,
              supplyCap: '1250000',
              totalSupply: '1054139.432300379574100645',
            },
            {
              token: {
                chainId: 1,
                address: '0x2260FAC5E5542a773Aa44fBCfeDf7C193bc2C599',
                decimals: 8,
                symbol: 'WBTC',
                name: 'Wrapped BTC',
                logoUri: 'https://cdn.furucombo.app/assets/img/token/WBTC.svg',
              },
              price: '64268.87322622',
              balance: '0',
              apy: '0.00140373635528771014',
              lstApy: '0',
              grossApy: '0.00140373635528771014',
              usageAsCollateralEnabled: true,
              ltv: '0.73',
              liquidationThreshold: '0.78',
              isNotCollateral: false,
              supplyCap: '43000',
              totalSupply: '32708.17048037',
            },
            {
              token: {
                chainId: 1,
                address: '0xA0b86991c6218b36c1d19D4a2e9Eb0cE3606eB48',
                decimals: 6,
                symbol: 'USDC',
                name: 'USD Coin',
                logoUri: 'https://cdn.furucombo.app/assets/img/token/USDC.svg',
              },
              price: '1.0000111',
              balance: '0',
              apy: '0.07260761837469745165',
              lstApy: '0',
              grossApy: '0.07260761837469745165',
              usageAsCollateralEnabled: true,
              ltv: '0.75',
              liquidationThreshold: '0.78',
              isNotCollateral: false,
              supplyCap: '1760000000',
              totalSupply: '1435012343.566126',
            },
            {
              token: {
                chainId: 1,
                address: '0x6B175474E89094C44Da98b954EedeAC495271d0F',
                decimals: 18,
                symbol: 'DAI',
                name: 'Dai Stablecoin',
                logoUri: 'https://cdn.furucombo.app/assets/img/token/DAI.png',
              },
              price: '0.99974771',
              balance: '0',
              apy: '0.06062434812868247531',
              lstApy: '0',
              grossApy: '0.06062434812868247531',
              usageAsCollateralEnabled: true,
              ltv: '0.63',
              liquidationThreshold: '0.77',
              isNotCollateral: false,
              supplyCap: '338000000',
              totalSupply: '132476959.510451457993039159',
            },
            {
              token: {
                chainId: 1,
                address: '0x514910771AF9Ca656af840dff83E8264EcF986CA',
                decimals: 18,
                symbol: 'LINK',
                name: 'Chainlink',
                logoUri: 'https://cdn.furucombo.app/assets/img/token/LINK.svg',
              },
              price: '13.537608',
              balance: '0',
              apy: '0.00000650541153989304',
              lstApy: '0',
              grossApy: '0.00000650541153989304',
              usageAsCollateralEnabled: true,
              ltv: '0.53',
              liquidationThreshold: '0.68',
              isNotCollateral: false,
              supplyCap: '15000000',
              totalSupply: '10743477.601480748047530678',
            },
            {
              token: {
                chainId: 1,
                address: '0x7Fc66500c84A76Ad7e9c93437bFc5Ac33E2DDaE9',
                decimals: 18,
                symbol: 'AAVE',
                name: 'Aave Token',
                logoUri: 'https://cdn.furucombo.app/assets/img/token/AAVE.svg',
              },
              price: '81.14860676',
              balance: '0',
              apy: '0',
              lstApy: '0',
              grossApy: '0',
              usageAsCollateralEnabled: true,
              ltv: '0.66',
              liquidationThreshold: '0.73',
              isNotCollateral: false,
              supplyCap: '1850000',
              totalSupply: '1023782.604477071997995829',
            },
            {
              token: {
                chainId: 1,
                address: '0xBe9895146f7AF43049ca1c1AE358B0541Ea49704',
                decimals: 18,
                symbol: 'cbETH',
                name: 'Coinbase Wrapped Staked ETH',
                logoUri: 'https://cdn.furucombo.app/assets/img/token/cbETH.svg',
              },
              price: '3755.17529491',
              balance: '0',
              apy: '0.00148820158279960945',
              lstApy: '0.0252',
              grossApy: '0.02668820158279960945',
              usageAsCollateralEnabled: true,
              ltv: '0.745',
              liquidationThreshold: '0.77',
              isNotCollateral: false,
              supplyCap: '60000',
              totalSupply: '8872.631156956610165222',
            },
            {
              token: {
                chainId: 1,
                address: '0xdAC17F958D2ee523a2206206994597C13D831ec7',
                decimals: 6,
                symbol: 'USDT',
                name: 'Tether USD',
                logoUri: 'https://cdn.furucombo.app/assets/img/token/USDT.svg',
              },
              price: '0.9995',
              balance: '0.053894',
              apy: '0.04976514320210701649',
              lstApy: '0',
              grossApy: '0.04976514320210701649',
              usageAsCollateralEnabled: true,
              ltv: '0.75',
              liquidationThreshold: '0.78',
              isNotCollateral: false,
              supplyCap: '2000000000',
              totalSupply: '1728725165.462303',
            },
            {
              token: {
                chainId: 1,
                address: '0xae78736Cd615f374D3085123A210448E74Fc6393',
                decimals: 18,
                symbol: 'rETH',
                name: 'Rocket Pool ETH',
                logoUri: 'https://cdn.furucombo.app/assets/img/token/rETH.svg',
              },
              price: '3876.74130142',
              balance: '0',
              apy: '0.0000745755359291114',
              lstApy: '0.0282',
              grossApy: '0.0282745755359291114',
              usageAsCollateralEnabled: true,
              ltv: '0.745',
              liquidationThreshold: '0.77',
              isNotCollateral: false,
              supplyCap: '90000',
              totalSupply: '45505.671139764429134872',
            },
            {
              token: {
                chainId: 1,
                address: '0x5f98805A4E8be255a32880FDeC7F6728C6568bA0',
                decimals: 18,
                symbol: 'LUSD',
                name: 'LUSD Stablecoin',
                logoUri: 'https://cdn.furucombo.app/assets/img/token/LUSD.png',
              },
              price: '0.9980375',
              balance: '0',
              apy: '0.03947694107342405453',
              lstApy: '0',
              grossApy: '0.03947694107342405453',
              usageAsCollateralEnabled: true,
              ltv: '0',
              liquidationThreshold: '0.77',
              isNotCollateral: false,
              supplyCap: '18000000',
              totalSupply: '6022468.926919418489385423',
            },
            {
              token: {
                chainId: 1,
                address: '0xD533a949740bb3306d119CC777fa900bA034cd52',
                decimals: 18,
                symbol: 'CRV',
                name: 'Curve DAO Token',
                logoUri: 'https://cdn.furucombo.app/assets/img/token/CRV.png',
              },
              price: '0.33869019',
              balance: '0',
              apy: '0.00371043180229206429',
              lstApy: '0',
              grossApy: '0.00371043180229206429',
              usageAsCollateralEnabled: false,
              ltv: '0.35',
              liquidationThreshold: '0.41',
              isNotCollateral: false,
              supplyCap: '10000000',
              totalSupply: '8493491.860015097189029534',
            },
            {
              token: {
                chainId: 1,
                address: '0x9f8F72aA9304c8B593d555F12eF6589cC3A579A2',
                decimals: 18,
                symbol: 'MKR',
                name: 'Maker',
                logoUri: 'https://cdn.furucombo.app/assets/img/token/MKR.png',
              },
              price: '2467.23492',
              balance: '0',
              apy: '0.00000201710245478121',
              lstApy: '0',
              grossApy: '0.00000201710245478121',
              usageAsCollateralEnabled: false,
              ltv: '0.65',
              liquidationThreshold: '0.7',
              isNotCollateral: false,
              supplyCap: '22500',
              totalSupply: '16917.091087818626641285',
            },
            {
              token: {
                chainId: 1,
                address: '0xC011a73ee8576Fb46F5E1c5751cA3B9Fe0af2a6F',
                decimals: 18,
                symbol: 'SNX',
                name: 'Synthetix Network Token',
                logoUri: 'https://cdn.furucombo.app/assets/img/token/SNX.png',
              },
              price: '1.96848363',
              balance: '0',
              apy: '0.00079278055703656286',
              lstApy: '0',
              grossApy: '0.00079278055703656286',
              usageAsCollateralEnabled: false,
              ltv: '0.49',
              liquidationThreshold: '0.65',
              isNotCollateral: false,
              supplyCap: '4500000',
              totalSupply: '1275219.778073992374306194',
            },
            {
              token: {
                chainId: 1,
                address: '0xba100000625a3754423978a60c9317c58a424e3D',
                decimals: 18,
                symbol: 'BAL',
                name: 'Balancer',
                logoUri: 'https://cdn.furucombo.app/assets/img/token/BAL.png',
              },
              price: '3.1068305',
              balance: '0',
              apy: '0.00517476957917497622',
              lstApy: '0',
              grossApy: '0.00517476957917497622',
              usageAsCollateralEnabled: false,
              ltv: '0.57',
              liquidationThreshold: '0.59',
              isNotCollateral: false,
              supplyCap: '2100000',
              totalSupply: '2100125.480770058965885096',
            },
            {
              token: {
                chainId: 1,
                address: '0x1f9840a85d5aF5bf1D1762F925BDADdC4201F984',
                decimals: 18,
                symbol: 'UNI',
                name: 'Uniswap Token',
                logoUri: 'https://cdn.furucombo.app/assets/img/token/UNI.png',
              },
              price: '9.84688354',
              balance: '0',
              apy: '0.00021107678898168057',
              lstApy: '0',
              grossApy: '0.00021107678898168057',
              usageAsCollateralEnabled: false,
              ltv: '0.65',
              liquidationThreshold: '0.74',
              isNotCollateral: false,
              supplyCap: '4000000',
              totalSupply: '883265.562784083784110027',
            },
            {
              token: {
                chainId: 1,
                address: '0x5A98FcBEA516Cf06857215779Fd812CA3beF1B32',
                decimals: 18,
                symbol: 'LDO',
                name: 'Lido DAO Token',
                logoUri: 'https://cdn.furucombo.app/assets/img/token/LDO.png',
              },
              price: '2.17544726',
              balance: '0',
              apy: '0.00000618368788390498',
              lstApy: '0',
              grossApy: '0.00000618368788390498',
              usageAsCollateralEnabled: false,
              ltv: '0.4',
              liquidationThreshold: '0.5',
              isNotCollateral: false,
              supplyCap: '8000000',
              totalSupply: '5805172.997914637403682053',
            },
            {
              token: {
                chainId: 1,
                address: '0xC18360217D8F7Ab5e7c516566761Ea12Ce7F9D72',
                decimals: 18,
                symbol: 'ENS',
                name: 'Ethereum Name Service',
                logoUri: 'https://cdn.furucombo.app/assets/img/token/ENS.png',
              },
              price: '25.49857422',
              balance: '0',
              apy: '0.00014285849459262124',
              lstApy: '0',
              grossApy: '0.00014285849459262124',
              usageAsCollateralEnabled: false,
              ltv: '0.39',
              liquidationThreshold: '0.49',
              isNotCollateral: false,
              supplyCap: '1500000',
              totalSupply: '258918.593525444777204954',
            },
            {
              token: {
                chainId: 1,
                address: '0x111111111117dC0aa78b770fA6A738034120C302',
                decimals: 18,
                symbol: '1INCH',
                name: '1INCH Token',
                logoUri: 'https://cdn.furucombo.app/assets/img/token/1INCH.svg',
              },
              price: '0.4046713',
              balance: '0',
              apy: '0.00040454297146121741',
              lstApy: '0',
              grossApy: '0.00040454297146121741',
              usageAsCollateralEnabled: false,
              ltv: '0.57',
              liquidationThreshold: '0.67',
              isNotCollateral: false,
              supplyCap: '30000000',
              totalSupply: '2988556.927804154997456593',
            },
            {
              token: {
                chainId: 1,
                address: '0x853d955aCEf822Db058eb8505911ED77F175b99e',
                decimals: 18,
                symbol: 'FRAX',
                name: 'Frax',
                logoUri: 'https://cdn.furucombo.app/assets/img/token/FRAX.png',
              },
              price: '0.99751811',
              balance: '0',
              apy: '0.04522309987283284469',
              lstApy: '0',
              grossApy: '0.04522309987283284469',
              usageAsCollateralEnabled: false,
              ltv: '0',
              liquidationThreshold: '0.72',
              isNotCollateral: false,
              supplyCap: '15000000',
              totalSupply: '1209712.688322105109776157',
            },
            {
              token: {
                chainId: 1,
                address: '0xD33526068D116cE69F19A9ee46F0bd304F21A51f',
                decimals: 18,
                symbol: 'RPL',
                name: 'Rocket Pool',
                logoUri: 'https://cdn.furucombo.app/assets/img/token/RPL.png',
              },
              price: '23.17665077',
              balance: '0',
              apy: '0.02841012706911820535',
              lstApy: '0',
              grossApy: '0.02841012706911820535',
              usageAsCollateralEnabled: false,
              ltv: '0',
              liquidationThreshold: '0',
              isNotCollateral: false,
              supplyCap: '840000',
              totalSupply: '511556.003846518852941065',
            },
            {
              token: {
                chainId: 1,
                address: '0x83F20F44975D03b1b09e64809B757c47f942BEeA',
                decimals: 18,
                symbol: 'sDAI',
                name: 'Savings Dai',
                logoUri: 'https://cdn.furucombo.app/assets/img/token/sDAI.svg',
              },
              price: '1.09090239',
              balance: '0',
              apy: '0',
              lstApy: '0.077',
              grossApy: '0.077',
              usageAsCollateralEnabled: true,
              ltv: '0.75',
              liquidationThreshold: '0.78',
              isNotCollateral: false,
              supplyCap: '340000000',
              totalSupply: '59130045.009304874786311325',
            },
            {
              token: {
                chainId: 1,
                address: '0xf939E0A03FB07F59A73314E73794Be0E57ac1b4E',
                decimals: 18,
                symbol: 'crvUSD',
                name: 'Curve.Fi USD Stablecoin',
                logoUri: 'https://cdn.furucombo.app/assets/img/token/crvUSD.svg',
              },
              price: '0.99823308',
              balance: '0',
              apy: '0.14860902390258715261',
              lstApy: '0',
              grossApy: '0.14860902390258715261',
              usageAsCollateralEnabled: false,
              ltv: '0',
              liquidationThreshold: '0',
              isNotCollateral: false,
              supplyCap: '60000000',
              totalSupply: '768895.407799463421834955',
            },
            {
              token: {
                chainId: 1,
                address: '0x6c3ea9036406852006290770BEdFcAbA0e23A0e8',
                decimals: 6,
                symbol: 'PYUSD',
                name: 'PayPal USD',
                logoUri: 'https://cdn.furucombo.app/assets/img/token/PYUSD.webp',
              },
              price: '0.99776402',
              balance: '0',
              apy: '0.04717155968982374344',
              lstApy: '0',
              grossApy: '0.04717155968982374344',
              usageAsCollateralEnabled: false,
              ltv: '0',
              liquidationThreshold: '0',
              isNotCollateral: false,
              supplyCap: '60000000',
              totalSupply: '30698129.929268',
            },
            {
              token: {
                chainId: 1,
                address: '0xCd5fE23C85820F7B72D0926FC9b05b43E359b7ee',
                decimals: 18,
                symbol: 'weETH',
                name: 'Wrapped eETH',
                logoUri: 'https://cdn.furucombo.app/assets/img/token/weETH.webp',
              },
              price: '3638.78762183',
              balance: '0',
              apy: '0.00425173845976198753',
              lstApy: '0',
              grossApy: '0.00425173845976198753',
              usageAsCollateralEnabled: true,
              ltv: '0.725',
              liquidationThreshold: '0.75',
              isNotCollateral: false,
              supplyCap: '450000',
              totalSupply: '450024.086706945644553981',
            },
            {
              token: {
                chainId: 1,
                address: '0xf1C9acDc66974dFB6dEcB12aA385b9cD01190E38',
                decimals: 18,
                symbol: 'osETH',
                name: 'Staked ETH',
                logoUri: 'https://cdn.furucombo.app/assets/img/token/osETH.webp',
              },
              price: '3563.03715641',
              balance: '0',
              apy: '0.00000009403607440768',
              lstApy: '0',
              grossApy: '0.00000009403607440768',
              usageAsCollateralEnabled: true,
              ltv: '0.725',
              liquidationThreshold: '0.75',
              isNotCollateral: false,
              supplyCap: '10000',
              totalSupply: '1599.139881190377388018',
            },
            {
              token: {
                chainId: 1,
                address: '0x4c9EDD5852cd905f086C759E8383e09bff1E68B3',
                decimals: 18,
                symbol: 'USDe',
                name: 'USDe',
                logoUri: 'https://cdn.furucombo.app/assets/img/token/USDe.webp',
              },
              price: '1.00124312',
              balance: '0',
              apy: '0.03253094084215635352',
              lstApy: '0',
              grossApy: '0.03253094084215635352',
              usageAsCollateralEnabled: false,
              ltv: '0.72',
              liquidationThreshold: '0.75',
              isNotCollateral: false,
              supplyCap: '80000000',
              totalSupply: '58743665.175333735802295967',
            },
            {
              token: {
                chainId: 1,
                address: '0xA35b1B31Ce002FBF2058D22F30f95D405200A15b',
                decimals: 18,
                symbol: 'ETHX',
                name: 'Stader ETHx',
                logoUri: 'https://tokens.1inch.io/0xa35b1b31ce002fbf2058d22f30f95d405200a15b.png',
              },
              price: '3609.89678807',
              balance: '0',
              apy: '0',
              lstApy: '0',
              grossApy: '0',
              usageAsCollateralEnabled: true,
              ltv: '0.745',
              liquidationThreshold: '0.77',
              isNotCollateral: false,
              supplyCap: '3200',
              totalSupply: '0.01',
            },
          ],
          borrows: [
            {
              token: {
                chainId: 1,
                address: '0x0000000000000000000000000000000000000000',
                decimals: 18,
                symbol: 'ETH',
                name: 'Ethereum',
                logoUri: 'https://cdn.furucombo.app/assets/img/token/ETH.png',
              },
              price: '3494.6068',
              balance: '0',
              apy: '0.02598193136595554556',
              lstApy: '0',
              grossApy: '0.02598193136595554556',
              borrowMin: '0',
              borrowCap: '1400000',
              totalBorrow: '699402.186151017608770306',
            },
            {
              token: {
                chainId: 1,
                address: '0x7f39C581F595B53c5cb19bD0b3f8dA6c935E2Ca0',
                decimals: 18,
                symbol: 'wstETH',
                name: 'Wrapped liquid staked Ether 2.0',
                logoUri: 'https://cdn.furucombo.app/assets/img/token/wstETH.png',
              },
              price: '4090.63672006',
              balance: '0.000000000199912829',
              apy: '0.00326992174986352142',
              lstApy: '0.0302',
              grossApy: '-0.02693007825013647858',
              borrowMin: '0',
              borrowCap: '24000',
              totalBorrow: '8059.81783569369902397',
            },
            {
              token: {
                chainId: 1,
                address: '0x2260FAC5E5542a773Aa44fBCfeDf7C193bc2C599',
                decimals: 8,
                symbol: 'WBTC',
                name: 'Wrapped BTC',
                logoUri: 'https://cdn.furucombo.app/assets/img/token/WBTC.svg',
              },
              price: '64268.87322622',
              balance: '0',
              apy: '0.01256269981262925495',
              lstApy: '0',
              grossApy: '0.01256269981262925495',
              borrowMin: '0',
              borrowCap: '28000',
              totalBorrow: '4593.87358365',
            },
            {
              token: {
                chainId: 1,
                address: '0xA0b86991c6218b36c1d19D4a2e9Eb0cE3606eB48',
                decimals: 6,
                symbol: 'USDC',
                name: 'USD Coin',
                logoUri: 'https://cdn.furucombo.app/assets/img/token/USDC.svg',
              },
              price: '1.0000111',
              balance: '0',
              apy: '0.09120826476657738063',
              lstApy: '0',
              grossApy: '0.09120826476657738063',
              borrowMin: '0',
              borrowCap: '1580000000',
              totalBorrow: '1280469515.116301',
            },
            {
              token: {
                chainId: 1,
                address: '0x6B175474E89094C44Da98b954EedeAC495271d0F',
                decimals: 18,
                symbol: 'DAI',
                name: 'Dai Stablecoin',
                logoUri: 'https://cdn.furucombo.app/assets/img/token/DAI.png',
              },
              price: '0.99974771',
              balance: '0',
              apy: '0.09157220150950166444',
              lstApy: '0',
              grossApy: '0.09157220150950166444',
              borrowMin: '0',
              borrowCap: '271000000',
              totalBorrow: '118670873.511773135104513993',
            },
            {
              token: {
                chainId: 1,
                address: '0x514910771AF9Ca656af840dff83E8264EcF986CA',
                decimals: 18,
                symbol: 'LINK',
                name: 'Chainlink',
                logoUri: 'https://cdn.furucombo.app/assets/img/token/LINK.svg',
              },
              price: '13.537608',
              balance: '0',
              apy: '0.00112532689445503349',
              lstApy: '0',
              grossApy: '0.00112532689445503349',
              borrowMin: '0',
              borrowCap: '13000000',
              totalBorrow: '77677.24818922618852606',
            },
            {
              token: {
                chainId: 1,
                address: '0xBe9895146f7AF43049ca1c1AE358B0541Ea49704',
                decimals: 18,
                symbol: 'cbETH',
                name: 'Coinbase Wrapped Staked ETH',
                logoUri: 'https://cdn.furucombo.app/assets/img/token/cbETH.svg',
              },
              price: '3755.17529491',
              balance: '0',
              apy: '0.01663373912070971711',
              lstApy: '0.0252',
              grossApy: '-0.00856626087929028289',
              borrowMin: '0',
              borrowCap: '2400',
              totalBorrow: '940.964061146817551613',
            },
            {
              token: {
                chainId: 1,
                address: '0xdAC17F958D2ee523a2206206994597C13D831ec7',
                decimals: 6,
                symbol: 'USDT',
                name: 'Tether USD',
                logoUri: 'https://cdn.furucombo.app/assets/img/token/USDT.svg',
              },
              price: '0.9995',
              balance: '0',
              apy: '0.07536106248422618788',
              lstApy: '0',
              grossApy: '0.07536106248422618788',
              borrowMin: '0',
              borrowCap: '1900000000',
              totalBorrow: '1283994747.611492',
            },
            {
              token: {
                chainId: 1,
                address: '0xae78736Cd615f374D3085123A210448E74Fc6393',
                decimals: 18,
                symbol: 'rETH',
                name: 'Rocket Pool ETH',
                logoUri: 'https://cdn.furucombo.app/assets/img/token/rETH.svg',
              },
              price: '3876.74130142',
              balance: '0',
              apy: '0.00370105750434031626',
              lstApy: '0.0282',
              grossApy: '-0.02449894249565968374',
              borrowMin: '0',
              borrowCap: '19200',
              totalBorrow: '1080.697805870056385699',
            },
            {
              token: {
                chainId: 1,
                address: '0x5f98805A4E8be255a32880FDeC7F6728C6568bA0',
                decimals: 18,
                symbol: 'LUSD',
                name: 'LUSD Stablecoin',
                logoUri: 'https://cdn.furucombo.app/assets/img/token/LUSD.png',
              },
              price: '0.9980375',
              balance: '0',
              apy: '0.07657854610554110383',
              lstApy: '0',
              grossApy: '0.07657854610554110383',
              borrowMin: '0',
              borrowCap: '8000000',
              totalBorrow: '3950408.877816320702657725',
            },
            {
              token: {
                chainId: 1,
                address: '0xD533a949740bb3306d119CC777fa900bA034cd52',
                decimals: 18,
                symbol: 'CRV',
                name: 'Curve DAO Token',
                logoUri: 'https://cdn.furucombo.app/assets/img/token/CRV.png',
              },
              price: '0.33869019',
              balance: '0',
              apy: '0.05331246913381238221',
              lstApy: '0',
              grossApy: '0.05331246913381238221',
              borrowMin: '0',
              borrowCap: '2750000',
              totalBorrow: '931751.331679711229780818',
            },
            {
              token: {
                chainId: 1,
                address: '0x9f8F72aA9304c8B593d555F12eF6589cC3A579A2',
                decimals: 18,
                symbol: 'MKR',
                name: 'Maker',
                logoUri: 'https://cdn.furucombo.app/assets/img/token/MKR.png',
              },
              price: '2467.23492',
              balance: '0',
              apy: '0.00062646603434670225',
              lstApy: '0',
              grossApy: '0.00062646603434670225',
              borrowMin: '0',
              borrowCap: '1980',
              totalBorrow: '68.108599054554798193',
            },
            {
              token: {
                chainId: 1,
                address: '0xC011a73ee8576Fb46F5E1c5751cA3B9Fe0af2a6F',
                decimals: 18,
                symbol: 'SNX',
                name: 'Synthetix Network Token',
                logoUri: 'https://cdn.furucombo.app/assets/img/token/SNX.png',
              },
              price: '1.96848363',
              balance: '0',
              apy: '0.03696460400046021471',
              lstApy: '0',
              grossApy: '0.03696460400046021471',
              borrowMin: '0',
              borrowCap: '150000',
              totalBorrow: '42840.457051528425633898',
            },
            {
              token: {
                chainId: 1,
                address: '0xba100000625a3754423978a60c9317c58a424e3D',
                decimals: 18,
                symbol: 'BAL',
                name: 'Balancer',
                logoUri: 'https://cdn.furucombo.app/assets/img/token/BAL.png',
              },
              price: '3.1068305',
              balance: '0',
              apy: '0.07678746730204005387',
              lstApy: '0',
              grossApy: '0.07678746730204005387',
              borrowMin: '0',
              borrowCap: '250000',
              totalBorrow: '183167.932909987194849715',
            },
            {
              token: {
                chainId: 1,
                address: '0x1f9840a85d5aF5bf1D1762F925BDADdC4201F984',
                decimals: 18,
                symbol: 'UNI',
                name: 'Uniswap Token',
                logoUri: 'https://cdn.furucombo.app/assets/img/token/UNI.png',
              },
              price: '9.84688354',
              balance: '0',
              apy: '0.00642668342925981215',
              lstApy: '0',
              grossApy: '0.00642668342925981215',
              borrowMin: '0',
              borrowCap: '330000',
              totalBorrow: '36375.040545180913671396',
            },
            {
              token: {
                chainId: 1,
                address: '0x5A98FcBEA516Cf06857215779Fd812CA3beF1B32',
                decimals: 18,
                symbol: 'LDO',
                name: 'Lido DAO Token',
                logoUri: 'https://cdn.furucombo.app/assets/img/token/LDO.png',
              },
              price: '2.17544726',
              balance: '0',
              apy: '0.00109713232028029557',
              lstApy: '0',
              grossApy: '0.00109713232028029557',
              borrowMin: '0',
              borrowCap: '1500000',
              totalBorrow: '40921.426222465417880561',
            },
            {
              token: {
                chainId: 1,
                address: '0xC18360217D8F7Ab5e7c516566761Ea12Ce7F9D72',
                decimals: 18,
                symbol: 'ENS',
                name: 'Ethereum Name Service',
                logoUri: 'https://cdn.furucombo.app/assets/img/token/ENS.png',
              },
              price: '25.49857422',
              balance: '0',
              apy: '0.00599384955801166945',
              lstApy: '0',
              grossApy: '0.00599384955801166945',
              borrowMin: '0',
              borrowCap: '40000',
              totalBorrow: '7736.534203688314904129',
            },
            {
              token: {
                chainId: 1,
                address: '0x111111111117dC0aa78b770fA6A738034120C302',
                decimals: 18,
                symbol: '1INCH',
                name: '1INCH Token',
                logoUri: 'https://cdn.furucombo.app/assets/img/token/1INCH.svg',
              },
              price: '0.4046713',
              balance: '0',
              apy: '0.01010633748554313299',
              lstApy: '0',
              grossApy: '0.01010633748554313299',
              borrowMin: '0',
              borrowCap: '475200',
              totalBorrow: '150263.237288575262851878',
            },
            {
              token: {
                chainId: 1,
                address: '0x853d955aCEf822Db058eb8505911ED77F175b99e',
                decimals: 18,
                symbol: 'FRAX',
                name: 'Frax',
                logoUri: 'https://cdn.furucombo.app/assets/img/token/FRAX.png',
              },
              price: '0.99751811',
              balance: '0',
              apy: '0.07719006971186043345',
              lstApy: '0',
              grossApy: '0.07719006971186043345',
              borrowMin: '0',
              borrowCap: '12000000',
              totalBorrow: '899663.572510923046133291',
            },
            {
              token: {
                chainId: 1,
                address: '0x40D16FC0246aD3160Ccc09B8D0D3A2cD28aE6C2f',
                decimals: 18,
                symbol: 'GHO',
                name: 'Gho Token',
                logoUri: 'https://cdn.furucombo.app/assets/img/token/GHO.svg',
              },
              price: '1',
              balance: '0',
              apy: '0.11627807024471977228',
              lstApy: '0',
              grossApy: '0.11627807024471977228',
              borrowMin: '0',
              borrowCap: '90000000',
              totalBorrow: '85117797.577177841069116473',
            },
            {
              token: {
                chainId: 1,
                address: '0xD33526068D116cE69F19A9ee46F0bd304F21A51f',
                decimals: 18,
                symbol: 'RPL',
                name: 'Rocket Pool',
                logoUri: 'https://cdn.furucombo.app/assets/img/token/RPL.png',
              },
              price: '23.17665077',
              balance: '0',
              apy: '0.06289556146004158251',
              lstApy: '0',
              grossApy: '0.06289556146004158251',
              borrowMin: '0',
              borrowCap: '500000',
              totalBorrow: '293694.999423940165414214',
            },
            {
              token: {
                chainId: 1,
                address: '0x83F20F44975D03b1b09e64809B757c47f942BEeA',
                decimals: 18,
                symbol: 'sDAI',
                name: 'Savings Dai',
                logoUri: 'https://cdn.furucombo.app/assets/img/token/sDAI.svg',
              },
              price: '1.09090239',
              balance: '0',
              apy: '0',
              lstApy: '0.077',
              grossApy: '0.077',
              borrowMin: '0',
              borrowCap: '0',
              totalBorrow: '0',
            },
            {
              token: {
                chainId: 1,
                address: '0xf939E0A03FB07F59A73314E73794Be0E57ac1b4E',
                decimals: 18,
                symbol: 'crvUSD',
                name: 'Curve.Fi USD Stablecoin',
                logoUri: 'https://cdn.furucombo.app/assets/img/token/crvUSD.svg',
              },
              price: '0.99823308',
              balance: '0',
              apy: '0.20536644036511876542',
              lstApy: '0',
              grossApy: '0.20536644036511876542',
              borrowMin: '0',
              borrowCap: '50000000',
              totalBorrow: '633772.449411406160718288',
            },
            {
              token: {
                chainId: 1,
                address: '0x6c3ea9036406852006290770BEdFcAbA0e23A0e8',
                decimals: 6,
                symbol: 'PYUSD',
                name: 'PayPal USD',
                logoUri: 'https://cdn.furucombo.app/assets/img/token/PYUSD.webp',
              },
              price: '0.99776402',
              balance: '0',
              apy: '0.08383925841783508781',
              lstApy: '0',
              grossApy: '0.08383925841783508781',
              borrowMin: '0',
              borrowCap: '48000000',
              totalBorrow: '21970919.907037',
            },
            {
              token: {
                chainId: 1,
                address: '0xCd5fE23C85820F7B72D0926FC9b05b43E359b7ee',
                decimals: 18,
                symbol: 'weETH',
                name: 'Wrapped eETH',
                logoUri: 'https://cdn.furucombo.app/assets/img/token/weETH.webp',
              },
              price: '3638.78762183',
              balance: '0',
              apy: '0.04006021467368710406',
              lstApy: '0',
              grossApy: '0.04006021467368710406',
              borrowMin: '0',
              borrowCap: '150000',
              totalBorrow: '88384.145228582093639916',
            },
            {
              token: {
                chainId: 1,
                address: '0xf1C9acDc66974dFB6dEcB12aA385b9cD01190E38',
                decimals: 18,
                symbol: 'osETH',
                name: 'Staked ETH',
                logoUri: 'https://cdn.furucombo.app/assets/img/token/osETH.webp',
              },
              price: '3563.03715641',
              balance: '0',
              apy: '0.00013119250423332276',
              lstApy: '0',
              grossApy: '0.00013119250423332276',
              borrowMin: '0',
              borrowCap: '1000',
              totalBorrow: '1.348595474957247886',
            },
            {
              token: {
                chainId: 1,
                address: '0x4c9EDD5852cd905f086C759E8383e09bff1E68B3',
                decimals: 18,
                symbol: 'USDe',
                name: 'USDe',
                logoUri: 'https://cdn.furucombo.app/assets/img/token/USDe.webp',
              },
              price: '1.00124312',
              balance: '0',
              apy: '0.07175352667170238877',
              lstApy: '0',
              grossApy: '0.07175352667170238877',
              borrowMin: '0',
              borrowCap: '72000000',
              totalBorrow: '36197180.112808383407393319',
            },
            {
              token: {
                chainId: 1,
                address: '0xA35b1B31Ce002FBF2058D22F30f95D405200A15b',
                decimals: 18,
                symbol: 'ETHX',
                name: 'Stader ETHx',
                logoUri: 'https://tokens.1inch.io/0xa35b1b31ce002fbf2058d22f30f95d405200a15b.png',
              },
              price: '3609.89678807',
              balance: '0',
              apy: '0',
              lstApy: '0',
              grossApy: '0',
              borrowMin: '0',
              borrowCap: '320',
              totalBorrow: '0',
            },
          ],
        },
      },
      {
        chainId: common.ChainId.gnosis,
        account: '0xd0214b7e8a7821a5cb07024bc00d64ece8cc1067',
        blockTag: 32001300,
        expected: {
          chainId: 100,

          protocolId: 'aave-v3',
          marketId: 'gnosis',
          utilization: '0.52772311717694312522',
          healthRate: '1.97073041932194302686',
          totalSupplyUSD: '126866.022202106736436498',
          totalBorrowUSD: '50212.59952525128102917535054923',
          supplies: [
            {
              token: {
                chainId: 100,
                address: '0x6A023CCd1ff6F2045C3309768eAd9E68F978f6e1',
                decimals: 18,
                symbol: 'WETH',
                name: 'Wrapped Ether on xDai',
              },
              price: '2534.9',
              balance: '50.04774239698084202',
              apy: '0.00761306207708669056',
              usageAsCollateralEnabled: true,
              ltv: '0.75',
              liquidationThreshold: '0.78',
              isNotCollateral: false,
              supplyCap: '4000',
              totalSupply: '2314.964437127338665368',
            },
            {
              token: {
                chainId: 100,
                address: '0x6C76971f98945AE98dD7d4DFcA8711ebea946eA6',
                decimals: 18,
                symbol: 'wstETH',
                name: 'Wrapped liquid staked Ether 2.0 from Mainnet',
              },
              price: '2925.2912629',
              balance: '0',
              apy: '0.00000000025288227545',
              usageAsCollateralEnabled: true,
              ltv: '0.75',
              liquidationThreshold: '0.78',
              isNotCollateral: false,
              supplyCap: '5000',
              totalSupply: '3798.234794199409162802',
            },
            {
              token: {
                chainId: 100,
                address: '0x9C58BAcC331c9aa871AFD802DB6379a98e80CEdb',
                decimals: 18,
                symbol: 'GNO',
                name: 'Gnosis Token on xDai',
              },
              price: '215.694',
              balance: '0',
              apy: '0.0000233014041152648',
              usageAsCollateralEnabled: false,
              ltv: '0.31',
              liquidationThreshold: '0.36',
              isNotCollateral: false,
              supplyCap: '40000',
              totalSupply: '26469.306100102939105313',
            },
            {
              token: {
                chainId: 100,
                address: '0xDDAfbb505ad214D7b80b1f830fcCc89B60fb7A83',
                decimals: 6,
                symbol: 'USDC',
                name: 'USD//C on xDai',
              },
              price: '1.00009316',
              balance: '0',
              apy: '0.03487021193804434009',
              usageAsCollateralEnabled: true,
              ltv: '0.77',
              liquidationThreshold: '0.8',
              isNotCollateral: false,
              supplyCap: '1500000',
              totalSupply: '1080122.051118',
            },
            {
              token: {
                chainId: 100,
                address: '0x0000000000000000000000000000000000000000',
                decimals: 18,
                symbol: 'xDAI',
                name: 'xDai',
              },
              price: '0.99981787',
              balance: '0',
              apy: '0.04469137172265371084',
              usageAsCollateralEnabled: true,
              ltv: '0.77',
              liquidationThreshold: '0.8',
              isNotCollateral: false,
              supplyCap: '2300000',
              totalSupply: '1082520.139404795483024586',
            },
            {
              token: {
                chainId: 100,
                address: '0xcB444e90D8198415266c6a2724b7900fb12FC56E',
                decimals: 18,
                symbol: 'EURe',
                name: 'Monerium EUR emoney',
              },
              price: '1.0894',
              balance: '0',
              apy: '0.01985047309378094259',
              usageAsCollateralEnabled: false,
              ltv: '0',
              liquidationThreshold: '0',
              isNotCollateral: false,
              supplyCap: '750000',
              totalSupply: '572291.696788509506019059',
            },
            {
              token: {
                chainId: 100,
                address: '0xaf204776c7245bF4147c2612BF6e5972Ee483701',
                decimals: 18,
                symbol: 'sDAI',
                name: 'Savings xDAI ',
              },
              price: '1.03557393',
              balance: '0',
              apy: '0',
              usageAsCollateralEnabled: true,
              ltv: '0.77',
              liquidationThreshold: '0.8',
              isNotCollateral: false,
              supplyCap: '6000000',
              totalSupply: '1535851.908876436024002253',
            },
          ],
          borrows: [
            {
              token: {
                chainId: 100,
                address: '0x6A023CCd1ff6F2045C3309768eAd9E68F978f6e1',
                decimals: 18,
                symbol: 'WETH',
                name: 'Wrapped Ether on xDai',
              },
              price: '2534.9',
              balance: '0',
              apy: '0.01937005380783217141',
              grossApy: '0.01937005380783217141',
              borrowMin: '0',
              borrowCap: '3500',
              totalBorrow: '1076.67932159482269314',
            },
            {
              token: {
                chainId: 100,
                address: '0x6C76971f98945AE98dD7d4DFcA8711ebea946eA6',
                decimals: 18,
                symbol: 'wstETH',
                name: 'Wrapped liquid staked Ether 2.0 from Mainnet',
              },
              price: '2925.2912629',
              balance: '0',
              apy: '0.00000680289821047039',
              grossApy: '-0.03239319710178952961',
              borrowMin: '0',
              borrowCap: '400',
              totalBorrow: '0.166107322574699592',
            },
            {
              token: {
                chainId: 100,
                address: '0x9C58BAcC331c9aa871AFD802DB6379a98e80CEdb',
                decimals: 18,
                symbol: 'GNO',
                name: 'Gnosis Token on xDai',
              },
              price: '215.694',
              balance: '0',
              apy: '0.00233965441493896007',
              grossApy: '0.00233965441493896007',
              borrowMin: '0',
              borrowCap: '1100',
              totalBorrow: '329.903640471858495928',
            },
            {
              token: {
                chainId: 100,
                address: '0xDDAfbb505ad214D7b80b1f830fcCc89B60fb7A83',
                decimals: 6,
                symbol: 'USDC',
                name: 'USD//C on xDai',
              },
              price: '1.00009316',
              balance: '0',
              apy: '0.05167921355207303083',
              grossApy: '0.05167921355207303083',
              borrowMin: '0',
              borrowCap: '1500000',
              totalBorrow: '816413.001448',
            },
            {
              token: {
                chainId: 100,
                address: '0x0000000000000000000000000000000000000000',
                decimals: 18,
                symbol: 'xDAI',
                name: 'xDai',
              },
              price: '0.99981787',
              balance: '50221.746411925284981329',
              apy: '0.05855943637730762431',
              grossApy: '0.05855943637730762431',
              borrowMin: '0',
              borrowCap: '2300000',
              totalBorrow: '924127.024179326995013372',
            },
            {
              token: {
                chainId: 100,
                address: '0xcB444e90D8198415266c6a2724b7900fb12FC56E',
                decimals: 18,
                symbol: 'EURe',
                name: 'Monerium EUR emoney',
              },
              price: '1.0894',
              balance: '0',
              apy: '0.03257820582035877173',
              grossApy: '0.03257820582035877173',
              borrowMin: '0',
              borrowCap: '750000',
              totalBorrow: '412826.531298661017523169',
            },
          ],
        },
      },
      {
        chainId: common.ChainId.polygon,
        account: '0x1DC6074361a3cddEe55A61C92BCf7dE1667e1096',
        blockTag: 58000000,
        expected: {
          chainId: 137,
          protocolId: 'aave-v3',
          marketId: 'polygon',
          utilization: '0',
          healthRate: 'Infinity',
          netAPY: '0',
          totalSupplyUSD: '0',
          totalBorrowUSD: '0',
          supplies: [
            {
              token: {
                chainId: 137,
                address: '0x8f3Cf7ad23Cd3CaDbD9735AFf958023239c6A063',
                decimals: 18,
                symbol: 'DAI',
                name: '(PoS) Dai Stablecoin',
                logoUri: 'https://cdn.furucombo.app/assets/img/token/DAI.png',
              },
              price: '0.99935157',
              balance: '0',
              apy: '0.05981509459226069427',
              lstApy: '0',
              grossApy: '0.05981509459226069427',
              usageAsCollateralEnabled: true,
              ltv: '0.63',
              liquidationThreshold: '0.77',
              isNotCollateral: false,
              supplyCap: '45000000',
              totalSupply: '17529696.216022808983816131',
            },
            {
              token: {
                chainId: 137,
                address: '0x53E0bca35eC356BD5ddDFebbD1Fc0fD03FaBad39',
                decimals: 18,
                symbol: 'LINK',
                name: 'Chainlink',
                logoUri: 'https://cdn.furucombo.app/assets/img/token/LINK.svg',
              },
              price: '16.003',
              balance: '0',
              apy: '0.00017657157548389137',
              lstApy: '0',
              grossApy: '0.00017657157548389137',
              usageAsCollateralEnabled: true,
              ltv: '0.53',
              liquidationThreshold: '0.68',
              isNotCollateral: false,
              supplyCap: '800000',
              totalSupply: '689571.334319963695132291',
            },
            {
              token: {
                chainId: 137,
                address: '0x2791Bca1f2de4661ED88A30C99A7a9449Aa84174',
                decimals: 6,
                symbol: 'USDC.e',
                name: 'USD Coin (PoS)',
                logoUri: 'https://cdn.furucombo.app/assets/img/token/USDC.svg',
              },
              price: '0.99993971',
              balance: '0',
              apy: '0.06597591218209898498',
              lstApy: '0',
              grossApy: '0.06597591218209898498',
              usageAsCollateralEnabled: true,
              ltv: '0.75',
              liquidationThreshold: '0.78',
              isNotCollateral: false,
              supplyCap: '48000000',
              totalSupply: '32401920.20846',
            },
            {
              token: {
                chainId: 137,
                address: '0x1BFD67037B42Cf73acF2047067bd4F2C47D9BfD6',
                decimals: 8,
                symbol: 'WBTC',
                name: '(PoS) Wrapped BTC',
                logoUri: 'https://cdn.furucombo.app/assets/img/token/WBTC.svg',
              },
              price: '69928.667',
              balance: '0',
              apy: '0.00013269404889194006',
              lstApy: '0',
              grossApy: '0.00013269404889194006',
              usageAsCollateralEnabled: true,
              ltv: '0.73',
              liquidationThreshold: '0.78',
              isNotCollateral: false,
              supplyCap: '3100',
              totalSupply: '1686.50078083',
            },
            {
              token: {
                chainId: 137,
                address: '0x7ceB23fD6bC0adD59E62ac25578270cFf1b9f619',
                decimals: 18,
                symbol: 'WETH',
                name: 'Wrapped Ether',
                logoUri: 'https://cdn.furucombo.app/assets/img/token/WETH.svg',
              },
              price: '3687.38829921',
              balance: '0',
              apy: '0.0048361231295932674',
              lstApy: '0',
              grossApy: '0.0048361231295932674',
              usageAsCollateralEnabled: true,
              ltv: '0.8',
              liquidationThreshold: '0.825',
              isNotCollateral: false,
              supplyCap: '50000',
              totalSupply: '26773.379732343416889188',
            },
            {
              token: {
                chainId: 137,
                address: '0xc2132D05D31c914a87C6611C10748AEb04B58e8F',
                decimals: 6,
                symbol: 'USDT',
                name: '(PoS) Tether USD',
                logoUri: 'https://cdn.furucombo.app/assets/img/token/USDT.svg',
              },
              price: '0.9998',
              balance: '0',
              apy: '0.07253395226555340559',
              lstApy: '0',
              grossApy: '0.07253395226555340559',
              usageAsCollateralEnabled: true,
              ltv: '0.75',
              liquidationThreshold: '0.78',
              isNotCollateral: false,
              supplyCap: '90000000',
              totalSupply: '43890197.549873',
            },
            {
              token: {
                chainId: 137,
                address: '0xD6DF932A45C0f255f85145f286eA0b292B21C90B',
                decimals: 18,
                symbol: 'AAVE',
                name: 'Aave (PoS)',
                logoUri: 'https://cdn.furucombo.app/assets/img/token/AAVE.svg',
              },
              price: '92.54479',
              balance: '0',
              apy: '0',
              lstApy: '0',
              grossApy: '0',
              usageAsCollateralEnabled: true,
              ltv: '0.6',
              liquidationThreshold: '0.7',
              isNotCollateral: false,
              supplyCap: '70000',
              totalSupply: '69767.877663204840413709',
            },
            {
              token: {
                chainId: 137,
                address: '0x0000000000000000000000000000000000001010',
                decimals: 18,
                symbol: 'MATIC',
                name: 'Matic Token',
                logoUri: 'https://cdn.furucombo.app/assets/img/token/MATIC.png',
              },
              price: '0.6529',
              balance: '0',
              apy: '0.01599408247672849149',
              lstApy: '0',
              grossApy: '0.01599408247672849149',
              usageAsCollateralEnabled: true,
              ltv: '0.68',
              liquidationThreshold: '0.73',
              isNotCollateral: false,
              supplyCap: '105000000',
              totalSupply: '83958644.290765038617677',
            },
            {
              token: {
                chainId: 137,
                address: '0x385Eeac5cB85A38A9a07A70c73e0a3271CfB54A7',
                decimals: 18,
                symbol: 'GHST',
                name: 'Aavegotchi GHST Token (PoS)',
                logoUri: 'https://cdn.furucombo.app/assets/img/token/GHST.png',
              },
              price: '1.63134023',
              balance: '0',
              apy: '0.0000088134277169794',
              lstApy: '0',
              grossApy: '0.0000088134277169794',
              usageAsCollateralEnabled: true,
              ltv: '0',
              liquidationThreshold: '0.45',
              isNotCollateral: false,
              supplyCap: '4650000',
              totalSupply: '1632528.517060721581711029',
            },
            {
              token: {
                chainId: 137,
                address: '0xE111178A87A3BFf0c8d18DECBa5798827539Ae99',
                decimals: 2,
                symbol: 'EURS',
                name: 'STASIS EURS Token',
                logoUri: 'https://cdn.furucombo.app/assets/img/token/EURS.svg',
              },
              price: '1.07587',
              balance: '0',
              apy: '0.04773097614139357493',
              lstApy: '0',
              grossApy: '0.04773097614139357493',
              usageAsCollateralEnabled: false,
              ltv: '0.65',
              liquidationThreshold: '0.7',
              isNotCollateral: false,
              supplyCap: '4000000',
              totalSupply: '2843465.63',
            },
            {
              token: {
                chainId: 137,
                address: '0x3A58a54C066FdC0f2D55FC9C89F0415C92eBf3C4',
                decimals: 18,
                symbol: 'stMATIC',
                name: 'Staked MATIC (PoS)',
                logoUri: 'https://cdn.furucombo.app/assets/img/token/stMATIC.png',
              },
              price: '0.73208501',
              balance: '0',
              apy: '0',
              lstApy: '0.0418',
              grossApy: '0.0418',
              usageAsCollateralEnabled: true,
              ltv: '0.45',
              liquidationThreshold: '0.56',
              isNotCollateral: false,
              supplyCap: '57000000',
              totalSupply: '55875817.621586795080303266',
            },
            {
              token: {
                chainId: 137,
                address: '0xfa68FB4628DFF1028CFEc22b4162FCcd0d45efb6',
                decimals: 18,
                symbol: 'MaticX',
                name: 'Liquid Staking Matic (PoS)',
                logoUri: 'https://cdn.furucombo.app/assets/img/token/MaticX.png',
              },
              price: '0.72775124',
              balance: '0',
              apy: '0.00000653353557969894',
              lstApy: '0.0516',
              grossApy: '0.05160653353557969894',
              usageAsCollateralEnabled: true,
              ltv: '0.45',
              liquidationThreshold: '0.58',
              isNotCollateral: false,
              supplyCap: '97000000',
              totalSupply: '92172651.400957310633220338',
            },
            {
              token: {
                chainId: 137,
                address: '0x03b54A6e9a984069379fae1a4fC4dBAE93B3bCCD',
                decimals: 18,
                symbol: 'wstETH',
                name: 'Token Wrapped liquid staked Ether 2.0',
                logoUri: 'https://cdn.furucombo.app/assets/img/token/wstETH.png',
              },
              price: '4311.45174389',
              balance: '0',
              apy: '0.00016173421757863818',
              lstApy: '0.0302',
              grossApy: '0.03036173421757863818',
              usageAsCollateralEnabled: true,
              ltv: '0.7',
              liquidationThreshold: '0.79',
              isNotCollateral: false,
              supplyCap: '6100',
              totalSupply: '6099.99005519997569577',
            },
            {
              token: {
                chainId: 137,
                address: '0x3c499c542cEF5E3811e1192ce70d8cC03d5c3359',
                decimals: 6,
                symbol: 'USDC',
                name: 'USD Coin',
                logoUri: 'https://cdn.furucombo.app/assets/img/token/USDC.svg',
              },
              price: '0.99993971',
              balance: '0',
              apy: '0.07483794630305255485',
              lstApy: '0',
              grossApy: '0.07483794630305255485',
              usageAsCollateralEnabled: true,
              ltv: '0.75',
              liquidationThreshold: '0.78',
              isNotCollateral: false,
              supplyCap: '50000000',
              totalSupply: '35942635.528212',
            },
          ],
          borrows: [
            {
              token: {
                chainId: 137,
                address: '0x8f3Cf7ad23Cd3CaDbD9735AFf958023239c6A063',
                decimals: 18,
                symbol: 'DAI',
                name: '(PoS) Dai Stablecoin',
                logoUri: 'https://cdn.furucombo.app/assets/img/token/DAI.png',
              },
              price: '0.99935157',
              balance: '0',
              apy: '0.09225605660610480639',
              lstApy: '0',
              grossApy: '0.09225605660610480639',
              borrowMin: '0',
              borrowCap: '30000000',
              totalBorrow: '15239863.264506608956646907',
            },
            {
              token: {
                chainId: 137,
                address: '0x53E0bca35eC356BD5ddDFebbD1Fc0fD03FaBad39',
                decimals: 18,
                symbol: 'LINK',
                name: 'Chainlink',
                logoUri: 'https://cdn.furucombo.app/assets/img/token/LINK.svg',
              },
              price: '16.003',
              balance: '0',
              apy: '0.00587640782452130858',
              lstApy: '0',
              grossApy: '0.00587640782452130858',
              borrowMin: '0',
              borrowCap: '163702',
              totalBorrow: '25973.644168849070759166',
            },
            {
              token: {
                chainId: 137,
                address: '0x2791Bca1f2de4661ED88A30C99A7a9449Aa84174',
                decimals: 6,
                symbol: 'USDC.e',
                name: 'USD Coin (PoS)',
                logoUri: 'https://cdn.furucombo.app/assets/img/token/USDC.svg',
              },
              price: '0.99993971',
              balance: '0',
              apy: '0.10146066480201759222',
              lstApy: '0',
              grossApy: '0.10146066480201759222',
              borrowMin: '0',
              borrowCap: '43500000',
              totalBorrow: '25244719.6036',
            },
            {
              token: {
                chainId: 137,
                address: '0x1BFD67037B42Cf73acF2047067bd4F2C47D9BfD6',
                decimals: 8,
                symbol: 'WBTC',
                name: '(PoS) Wrapped BTC',
                logoUri: 'https://cdn.furucombo.app/assets/img/token/WBTC.svg',
              },
              price: '69928.667',
              balance: '0',
              apy: '0.00384701690813753154',
              lstApy: '0',
              grossApy: '0.00384701690813753154',
              borrowMin: '0',
              borrowCap: '851',
              totalBorrow: '72.84997115',
            },
            {
              token: {
                chainId: 137,
                address: '0x7ceB23fD6bC0adD59E62ac25578270cFf1b9f619',
                decimals: 18,
                symbol: 'WETH',
                name: 'Wrapped Ether',
                logoUri: 'https://cdn.furucombo.app/assets/img/token/WETH.svg',
              },
              price: '3687.38829921',
              balance: '0',
              apy: '0.02132159462495448608',
              lstApy: '0',
              grossApy: '0.02132159462495448608',
              borrowMin: '0',
              borrowCap: '14795',
              totalBorrow: '7202.88491871100968707',
            },
            {
              token: {
                chainId: 137,
                address: '0xc2132D05D31c914a87C6611C10748AEb04B58e8F',
                decimals: 6,
                symbol: 'USDT',
                name: '(PoS) Tether USD',
                logoUri: 'https://cdn.furucombo.app/assets/img/token/USDT.svg',
              },
              price: '0.9998',
              balance: '0',
              apy: '0.09281383039746965873',
              lstApy: '0',
              grossApy: '0.09281383039746965873',
              borrowMin: '0',
              borrowCap: '85000000',
              totalBorrow: '37636500.512118',
            },
            {
              token: {
                chainId: 137,
                address: '0x0000000000000000000000000000000000001010',
                decimals: 18,
                symbol: 'MATIC',
                name: 'Matic Token',
                logoUri: 'https://cdn.furucombo.app/assets/img/token/MATIC.png',
              },
              price: '0.6529',
              balance: '0',
              apy: '0.03703259109560484183',
              lstApy: '0',
              grossApy: '0.03703259109560484183',
              borrowMin: '0',
              borrowCap: '67000000',
              totalBorrow: '45796904.09373354650325187',
            },
            {
              token: {
                chainId: 137,
                address: '0x385Eeac5cB85A38A9a07A70c73e0a3271CfB54A7',
                decimals: 18,
                symbol: 'GHST',
                name: 'Aavegotchi GHST Token (PoS)',
                logoUri: 'https://cdn.furucombo.app/assets/img/token/GHST.png',
              },
              price: '1.63134023',
              balance: '0',
              apy: '0.00145335916403398889',
              lstApy: '0',
              grossApy: '0.00145335916403398889',
              borrowMin: '0',
              borrowCap: '220000',
              totalBorrow: '15241.68523126971433445',
            },
            {
              token: {
                chainId: 137,
                address: '0xE111178A87A3BFf0c8d18DECBa5798827539Ae99',
                decimals: 2,
                symbol: 'EURS',
                name: 'STASIS EURS Token',
                logoUri: 'https://cdn.furucombo.app/assets/img/token/EURS.svg',
              },
              price: '1.07587',
              balance: '0',
              apy: '0.08447101398119602036',
              lstApy: '0',
              grossApy: '0.08447101398119602036',
              borrowMin: '0',
              borrowCap: '3000000',
              totalBorrow: '1989035.73',
            },
            {
              token: {
                chainId: 137,
                address: '0x3A58a54C066FdC0f2D55FC9C89F0415C92eBf3C4',
                decimals: 18,
                symbol: 'stMATIC',
                name: 'Staked MATIC (PoS)',
                logoUri: 'https://cdn.furucombo.app/assets/img/token/stMATIC.png',
              },
              price: '0.73208501',
              balance: '0',
              apy: '0',
              lstApy: '0.0418',
              grossApy: '0.0418',
              borrowMin: '0',
              borrowCap: '0',
              totalBorrow: '0',
            },
            {
              token: {
                chainId: 137,
                address: '0xfa68FB4628DFF1028CFEc22b4162FCcd0d45efb6',
                decimals: 18,
                symbol: 'MaticX',
                name: 'Liquid Staking Matic (PoS)',
                logoUri: 'https://cdn.furucombo.app/assets/img/token/MaticX.png',
              },
              price: '0.72775124',
              balance: '0',
              apy: '0.00276658100179717038',
              lstApy: '0.0516',
              grossApy: '-0.04883341899820282962',
              borrowMin: '0',
              borrowCap: '5200000',
              totalBorrow: '272468.175512080353185138',
            },
            {
              token: {
                chainId: 137,
                address: '0x03b54A6e9a984069379fae1a4fC4dBAE93B3bCCD',
                decimals: 18,
                symbol: 'wstETH',
                name: 'Token Wrapped liquid staked Ether 2.0',
                logoUri: 'https://cdn.furucombo.app/assets/img/token/wstETH.png',
              },
              price: '4311.45174389',
              balance: '0',
              apy: '0.00580423673299669302',
              lstApy: '0.0302',
              grossApy: '-0.02439576326700330698',
              borrowMin: '0',
              borrowCap: '570',
              totalBorrow: '200.535169793395440565',
            },
            {
              token: {
                chainId: 137,
                address: '0x3c499c542cEF5E3811e1192ce70d8cC03d5c3359',
                decimals: 6,
                symbol: 'USDC',
                name: 'USD Coin',
                logoUri: 'https://cdn.furucombo.app/assets/img/token/USDC.svg',
              },
              price: '0.99993971',
              balance: '0',
              apy: '0.09368003477230242303',
              lstApy: '0',
              grossApy: '0.09368003477230242303',
              borrowMin: '0',
              borrowCap: '45000000',
              totalBorrow: '32282609.042521',
            },
          ],
        },
      },
      {
        chainId: common.ChainId.base,
        account: '0xb463c4d7c574bd0a05a1320186378dd6a7aeaa33',
        blockTag: 16356775,
        expected: {
          chainId: 8453,
          protocolId: 'aave-v3',
          marketId: 'base',
          utilization: '0.4886175551922254949',
          healthRate: '2.12333754482448013886',
          netAPY: '-0.04900929045188540645',
          totalSupplyUSD: '655089.44097675777521291861',
          totalBorrowUSD: '256070.56086584407036',
          supplies: [
            {
              token: {
                chainId: 8453,
                address: '0x0000000000000000000000000000000000000000',
                decimals: 18,
                symbol: 'ETH',
                name: 'Ethereum',
                logoUri: 'https://cdn.furucombo.app/assets/img/token/ETH.png',
              },
              price: '3444.77',
              balance: '190.169282993279021593',
              apy: '0.00349804210392809483',
              lstApy: '0',
              grossApy: '0.00349804210392809483',
              usageAsCollateralEnabled: true,
              ltv: '0.8',
              liquidationThreshold: '0.83',
              isNotCollateral: false,
              supplyCap: '18000',
              totalSupply: '15430.591466202099146501',
            },
            {
              token: {
                chainId: 8453,
                address: '0x2Ae3F1Ec7F1F5012CFEab0185bfc7aa3cf0DEc22',
                decimals: 18,
                symbol: 'cbETH',
                name: 'Coinbase Wrapped Staked ETH',
                logoUri: 'https://cdn.furucombo.app/assets/img/token/cbETH.svg',
              },
              price: '3702.67158528',
              balance: '0',
              apy: '0.00094517004558068127',
              lstApy: '0.0251',
              grossApy: '0.02604517004558068127',
              usageAsCollateralEnabled: true,
              ltv: '0.67',
              liquidationThreshold: '0.74',
              isNotCollateral: false,
              supplyCap: '3000',
              totalSupply: '1737.3393573953303827',
            },
            {
              token: {
                chainId: 8453,
                address: '0xd9aAEc86B65D86f6A7B5B1b0c42FFA531710b6CA',
                decimals: 6,
                symbol: 'USDbC',
                name: 'USD Base Coin',
                logoUri: 'https://cdn.furucombo.app/assets/img/token/USDC.svg',
              },
              price: '0.99979922',
              balance: '0',
              apy: '0.06058688673768664222',
              lstApy: '0',
              grossApy: '0.06058688673768664222',
              usageAsCollateralEnabled: true,
              ltv: '0.75',
              liquidationThreshold: '0.78',
              isNotCollateral: false,
              supplyCap: '2000000',
              totalSupply: '1987877.656922',
            },
            {
              token: {
                chainId: 8453,
                address: '0xc1CBa3fCea344f92D9239c08C0568f6F2F0ee452',
                decimals: 18,
                symbol: 'wstETH',
                name: 'Wrapped liquid staked Ether 2.0',
                logoUri: 'https://cdn.furucombo.app/assets/img/token/wstETH.png',
              },
              price: '4033.62108854',
              balance: '0',
              apy: '0.00195036820483782672',
              lstApy: '0.03',
              grossApy: '0.03195036820483782672',
              usageAsCollateralEnabled: true,
              ltv: '0.71',
              liquidationThreshold: '0.76',
              isNotCollateral: false,
              supplyCap: '6000',
              totalSupply: '3287.234844857867338487',
            },
            {
              token: {
                chainId: 8453,
                address: '0x833589fCD6eDb6E08f4c7C32D4f71b54bdA02913',
                decimals: 6,
                symbol: 'USDC',
                name: 'USD Coin',
                logoUri: 'https://cdn.furucombo.app/assets/img/token/USDC.svg',
              },
              price: '0.99979922',
              balance: '0',
              apy: '0.06218417664411723373',
              lstApy: '0',
              grossApy: '0.06218417664411723373',
              usageAsCollateralEnabled: true,
              ltv: '0.75',
              liquidationThreshold: '0.78',
              isNotCollateral: false,
              supplyCap: '60000000',
              totalSupply: '30564373.600947',
            },
            {
              token: {
                chainId: 8453,
                address: '0x04C0599Ae5A44757c0af6F9eC3b93da8976c150A',
                decimals: 18,
                symbol: 'weETH.base',
                name: 'Wrapped eETH',
                logoUri: 'https://cdn.furucombo.app/assets/img/token/weETH.webp',
              },
              price: '3587.89015314',
              balance: '0',
              apy: '0.0044098370492792484',
              lstApy: '0',
              grossApy: '0.0044098370492792484',
              usageAsCollateralEnabled: true,
              ltv: '0.725',
              liquidationThreshold: '0.75',
              isNotCollateral: false,
              supplyCap: '1200',
              totalSupply: '1199.99176468081877355',
            },
          ],
          borrows: [
            {
              token: {
                chainId: 8453,
                address: '0x0000000000000000000000000000000000000000',
                decimals: 18,
                symbol: 'ETH',
                name: 'Ethereum',
                logoUri: 'https://cdn.furucombo.app/assets/img/token/ETH.png',
              },
              price: '3444.77',
              balance: '0',
              apy: '0.0118445922756671722',
              lstApy: '0',
              grossApy: '0.0118445922756671722',
              borrowMin: '0',
              borrowCap: '9000',
              totalBorrow: '5383.591835412548997889',
            },
            {
              token: {
                chainId: 8453,
                address: '0x2Ae3F1Ec7F1F5012CFEab0185bfc7aa3cf0DEc22',
                decimals: 18,
                symbol: 'cbETH',
                name: 'Coinbase Wrapped Staked ETH',
                logoUri: 'https://cdn.furucombo.app/assets/img/token/cbETH.svg',
              },
              price: '3702.67158528',
              balance: '0',
              apy: '0.01323561257229830029',
              lstApy: '0.0251',
              grossApy: '-0.01186438742770169971',
              borrowMin: '0',
              borrowCap: '400',
              totalBorrow: '146.854077212648203333',
            },
            {
              token: {
                chainId: 8453,
                address: '0xd9aAEc86B65D86f6A7B5B1b0c42FFA531710b6CA',
                decimals: 6,
                symbol: 'USDbC',
                name: 'USD Base Coin',
                logoUri: 'https://cdn.furucombo.app/assets/img/token/USDC.svg',
              },
              price: '0.99979922',
              balance: '0',
              apy: '0.09459763549511059494',
              lstApy: '0',
              grossApy: '0.09459763549511059494',
              borrowMin: '0',
              borrowCap: '2000000',
              totalBorrow: '1617345.237269',
            },
            {
              token: {
                chainId: 8453,
                address: '0xc1CBa3fCea344f92D9239c08C0568f6F2F0ee452',
                decimals: 18,
                symbol: 'wstETH',
                name: 'Wrapped liquid staked Ether 2.0',
                logoUri: 'https://cdn.furucombo.app/assets/img/token/wstETH.png',
              },
              price: '4033.62108854',
              balance: '0',
              apy: '0.01906281120904493798',
              lstApy: '0.03',
              grossApy: '-0.01093718879095506202',
              borrowMin: '0',
              borrowCap: '400',
              totalBorrow: '399.049213159326446305',
            },
            {
              token: {
                chainId: 8453,
                address: '0x833589fCD6eDb6E08f4c7C32D4f71b54bdA02913',
                decimals: 6,
                symbol: 'USDC',
                name: 'USD Coin',
                logoUri: 'https://cdn.furucombo.app/assets/img/token/USDC.svg',
              },
              price: '0.99979922',
              balance: '256121.985038',
              apy: '0.0853169632762393352',
              lstApy: '0',
              grossApy: '0.0853169632762393352',
              borrowMin: '0',
              borrowCap: '54000000',
              totalBorrow: '25025415.377972',
            },
            {
              token: {
                chainId: 8453,
                address: '0x04C0599Ae5A44757c0af6F9eC3b93da8976c150A',
                decimals: 18,
                symbol: 'weETH.base',
                name: 'Wrapped eETH',
                logoUri: 'https://cdn.furucombo.app/assets/img/token/weETH.webp',
              },
              price: '3587.89015314',
              balance: '0',
              apy: '0.04081144694800701476',
              lstApy: '0',
              grossApy: '0.04081144694800701476',
              borrowMin: '0',
              borrowCap: '240',
              totalBorrow: '240.024635596916337416',
            },
          ],
        },
      },
      {
        chainId: common.ChainId.arbitrum,
        account: '0xccFa0530B9d52f970d1A2dAEa670ce58E4176389',
        blockTag: 226000000,
        expected: {
          chainId: 42161,
          protocolId: 'aave-v3',
          marketId: 'arbitrum',
          utilization: '1',
          healthRate: '0.92373319886645237809',
          netAPY: '0.05351844805161426993',
          totalSupplyUSD: '13822724.6022020401641153257158205',
          totalBorrowUSD: '11821543.76300418188881007779992',
          supplies: [
            {
              token: {
                chainId: 42161,
                address: '0xDA10009cBd5D07dd0CeCc66161FC93D7c9000da1',
                decimals: 18,
                symbol: 'DAI',
                name: 'Dai Stablecoin',
                logoUri: 'https://cdn.furucombo.app/assets/img/token/DAI.png',
              },
              price: '0.9998575',
              balance: '0',
              apy: '0.08208871277084876253',
              lstApy: '0',
              grossApy: '0.08208871277084876253',
              usageAsCollateralEnabled: true,
              ltv: '0.63',
              liquidationThreshold: '0.77',
              isNotCollateral: false,
              supplyCap: '50000000',
              totalSupply: '11408173.624791716916935195',
            },
            {
              token: {
                chainId: 42161,
                address: '0xf97f4df75117a78c1A5a0DBb814Af92458539FB4',
                decimals: 18,
                symbol: 'LINK',
                name: 'ChainLink Token',
                logoUri: 'https://cdn.furucombo.app/assets/img/token/LINK.svg',
              },
              price: '13.97788069',
              balance: '0',
              apy: '0.0000845601417804633',
              lstApy: '0',
              grossApy: '0.0000845601417804633',
              usageAsCollateralEnabled: true,
              ltv: '0.7',
              liquidationThreshold: '0.775',
              isNotCollateral: false,
              supplyCap: '2000000',
              totalSupply: '1841003.7021122210388616',
            },
            {
              token: {
                chainId: 42161,
                address: '0xFF970A61A04b1cA14834A43f5dE4533eBDDB5CC8',
                decimals: 6,
                symbol: 'USDC.e',
                name: 'Bridged USDC',
                logoUri: 'https://cdn.furucombo.app/assets/img/token/USDC.svg',
              },
              price: '0.99998806',
              balance: '0',
              apy: '0.07612519528707912269',
              lstApy: '0',
              grossApy: '0.07612519528707912269',
              usageAsCollateralEnabled: true,
              ltv: '0.75',
              liquidationThreshold: '0.78',
              isNotCollateral: false,
              supplyCap: '26000000',
              totalSupply: '11847053.324763',
            },
            {
              token: {
                chainId: 42161,
                address: '0x2f2a2543B76A4166549F7aaB2e75Bef0aefC5B0f',
                decimals: 8,
                symbol: 'WBTC',
                name: 'Wrapped BTC',
                logoUri: 'https://cdn.furucombo.app/assets/img/token/WBTC.svg',
              },
              price: '60987.74456364',
              balance: '0',
              apy: '0.00033836898438067921',
              lstApy: '0',
              grossApy: '0.00033836898438067921',
              usageAsCollateralEnabled: true,
              ltv: '0.73',
              liquidationThreshold: '0.78',
              isNotCollateral: false,
              supplyCap: '5000',
              totalSupply: '3527.49087676',
            },
            {
              token: {
                chainId: 42161,
                address: '0x0000000000000000000000000000000000000000',
                decimals: 18,
                symbol: 'ETH',
                name: 'Ethereum',
                logoUri: 'https://cdn.furucombo.app/assets/img/token/ETH.png',
              },
              price: '3366.21432',
              balance: '0',
              apy: '0.02081643680285221447',
              lstApy: '0',
              grossApy: '0.02081643680285221447',
              usageAsCollateralEnabled: true,
              ltv: '0.825',
              liquidationThreshold: '0.85',
              isNotCollateral: false,
              supplyCap: '120000',
              totalSupply: '86791.276499338226395613',
            },
            {
              token: {
                chainId: 42161,
                address: '0xFd086bC7CD5C481DCC9C85ebE478A1C0b69FCbb9',
                decimals: 6,
                symbol: 'USDT',
                name: 'Tether USD',
                logoUri: 'https://cdn.furucombo.app/assets/img/token/USDT.svg',
              },
              price: '0.99971',
              balance: '0',
              apy: '0.0615743234844530917',
              lstApy: '0',
              grossApy: '0.0615743234844530917',
              usageAsCollateralEnabled: true,
              ltv: '0.75',
              liquidationThreshold: '0.78',
              isNotCollateral: false,
              supplyCap: '130000000',
              totalSupply: '79605767.547391',
            },
            {
              token: {
                chainId: 42161,
                address: '0xba5DdD1f9d7F570dc94a51479a000E3BCE967196',
                decimals: 18,
                symbol: 'AAVE',
                name: 'Aave Token',
                logoUri: 'https://cdn.furucombo.app/assets/img/token/AAVE.svg',
              },
              price: '92.7602255',
              balance: '0',
              apy: '0',
              lstApy: '0',
              grossApy: '0',
              usageAsCollateralEnabled: true,
              ltv: '0.5',
              liquidationThreshold: '0.65',
              isNotCollateral: false,
              supplyCap: '3600',
              totalSupply: '3599.938424936449656531',
            },
            {
              token: {
                chainId: 42161,
                address: '0x5979D7b546E38E414F7E9822514be443A4800529',
                decimals: 18,
                symbol: 'wstETH',
                name: 'Wrapped liquid staked Ether 2.0',
                logoUri: 'https://cdn.furucombo.app/assets/img/token/wstETH.png',
              },
              price: '3941.31693746',
              balance: '3507.133483944115190425',
              apy: '0.00092372220687743929',
              lstApy: '0.0302',
              grossApy: '0.03112372220687743929',
              usageAsCollateralEnabled: true,
              ltv: '0.7',
              liquidationThreshold: '0.79',
              isNotCollateral: false,
              supplyCap: '69000',
              totalSupply: '40546.422127019846558423',
            },
            {
              token: {
                chainId: 42161,
                address: '0xEC70Dcb4A1EFa46b8F2D97C310C9c4790ba5ffA8',
                decimals: 18,
                symbol: 'rETH',
                name: 'Rocket Pool ETH',
                logoUri: 'https://cdn.furucombo.app/assets/img/token/rETH.svg',
              },
              price: '3735.11403295',
              balance: '0',
              apy: '0.00011169941434587345',
              lstApy: '0.0282',
              grossApy: '0.02831169941434587345',
              usageAsCollateralEnabled: true,
              ltv: '0.67',
              liquidationThreshold: '0.74',
              isNotCollateral: false,
              supplyCap: '5100',
              totalSupply: '3062.350364304856633158',
            },
            {
              token: {
                chainId: 42161,
                address: '0x93b346b6BC2548dA6A1E7d98E9a421B42541425b',
                decimals: 18,
                symbol: 'LUSD',
                name: 'LUSD Stablecoin',
                logoUri: 'https://cdn.furucombo.app/assets/img/token/LUSD.png',
              },
              price: '0.99785578',
              balance: '0',
              apy: '0.05664096233483124825',
              lstApy: '0',
              grossApy: '0.05664096233483124825',
              usageAsCollateralEnabled: false,
              ltv: '0',
              liquidationThreshold: '0',
              isNotCollateral: false,
              supplyCap: '2200000',
              totalSupply: '822797.604027609430529474',
            },
            {
              token: {
                chainId: 42161,
                address: '0xaf88d065e77c8cC2239327C5EDb3A432268e5831',
                decimals: 6,
                symbol: 'USDC',
                name: 'USD Coin',
                logoUri: 'https://cdn.furucombo.app/assets/img/token/USDC.svg',
              },
              price: '0.99998806',
              balance: '0',
              apy: '0.05226028789404342549',
              lstApy: '0',
              grossApy: '0.05226028789404342549',
              usageAsCollateralEnabled: true,
              ltv: '0.75',
              liquidationThreshold: '0.78',
              isNotCollateral: false,
              supplyCap: '350000000',
              totalSupply: '209249787.679936',
            },
            {
              token: {
                chainId: 42161,
                address: '0x17FC002b466eEc40DaE837Fc4bE5c67993ddBd6F',
                decimals: 18,
                symbol: 'FRAX',
                name: 'Frax',
                logoUri: 'https://cdn.furucombo.app/assets/img/token/FRAX.png',
              },
              price: '0.99765734',
              balance: '0',
              apy: '0.06110256279233765502',
              lstApy: '0',
              grossApy: '0.06110256279233765502',
              usageAsCollateralEnabled: false,
              ltv: '0',
              liquidationThreshold: '0.72',
              isNotCollateral: false,
              supplyCap: '7000000',
              totalSupply: '316517.473979311206222579',
            },
            {
              token: {
                chainId: 42161,
                address: '0x912CE59144191C1204E64559FE8253a0e49E6548',
                decimals: 18,
                symbol: 'ARB',
                name: 'Arbitrum',
                logoUri: 'https://cdn.furucombo.app/assets/img/token/ARB.svg',
              },
              price: '0.8058999',
              balance: '0',
              apy: '0.0067410499884729957',
              lstApy: '0',
              grossApy: '0.0067410499884729957',
              usageAsCollateralEnabled: true,
              ltv: '0.58',
              liquidationThreshold: '0.63',
              isNotCollateral: false,
              supplyCap: '40000000',
              totalSupply: '23503929.888702495616932056',
            },
            {
              token: {
                chainId: 42161,
                address: '0x35751007a407ca6FEFfE80b3cB397736D2cf4dbe',
                decimals: 18,
                symbol: 'weETH',
                name: 'Wrapped eETH',
                logoUri: 'https://cdn.furucombo.app/assets/img/token/weETH.webp',
              },
              price: '3505.74061167',
              balance: '0',
              apy: '0.00437232747081290185',
              lstApy: '0',
              grossApy: '0.00437232747081290185',
              usageAsCollateralEnabled: true,
              ltv: '0.725',
              liquidationThreshold: '0.75',
              isNotCollateral: false,
              supplyCap: '72000',
              totalSupply: '71998.095608425500002209',
            },
          ],
          borrows: [
            {
              token: {
                chainId: 42161,
                address: '0xDA10009cBd5D07dd0CeCc66161FC93D7c9000da1',
                decimals: 18,
                symbol: 'DAI',
                name: 'Dai Stablecoin',
                logoUri: 'https://cdn.furucombo.app/assets/img/token/DAI.png',
              },
              price: '0.9998575',
              balance: '0',
              apy: '0.12746338201591346557',
              lstApy: '0',
              grossApy: '0.12746338201591346557',
              borrowMin: '0',
              borrowCap: '30000000',
              totalBorrow: '9739112.200382496057470622',
            },
            {
              token: {
                chainId: 42161,
                address: '0xf97f4df75117a78c1A5a0DBb814Af92458539FB4',
                decimals: 18,
                symbol: 'LINK',
                name: 'ChainLink Token',
                logoUri: 'https://cdn.furucombo.app/assets/img/token/LINK.svg',
              },
              price: '13.97788069',
              balance: '0',
              apy: '0.0040630505947190354',
              lstApy: '0',
              grossApy: '0.0040630505947190354',
              borrowMin: '0',
              borrowCap: '484490',
              totalBorrow: '47988.89301186383659566',
            },
            {
              token: {
                chainId: 42161,
                address: '0xFF970A61A04b1cA14834A43f5dE4533eBDDB5CC8',
                decimals: 6,
                symbol: 'USDC.e',
                name: 'Bridged USDC',
                logoUri: 'https://cdn.furucombo.app/assets/img/token/USDC.svg',
              },
              price: '0.99998806',
              balance: '0',
              apy: '0.15517828284278664101',
              lstApy: '0',
              grossApy: '0.15517828284278664101',
              borrowMin: '0',
              borrowCap: '24000000',
              totalBorrow: '5803678.042503',
            },
            {
              token: {
                chainId: 42161,
                address: '0x2f2a2543B76A4166549F7aaB2e75Bef0aefC5B0f',
                decimals: 8,
                symbol: 'WBTC',
                name: 'Wrapped BTC',
                logoUri: 'https://cdn.furucombo.app/assets/img/token/WBTC.svg',
              },
              price: '60987.74456364',
              balance: '0',
              apy: '0.00614991785131723621',
              lstApy: '0',
              grossApy: '0.00614991785131723621',
              borrowMin: '0',
              borrowCap: '1115',
              totalBorrow: '243.30776904',
            },
            {
              token: {
                chainId: 42161,
                address: '0x0000000000000000000000000000000000000000',
                decimals: 18,
                symbol: 'ETH',
                name: 'Ethereum',
                logoUri: 'https://cdn.furucombo.app/assets/img/token/ETH.png',
              },
              price: '3366.21432',
              balance: '3511.821482300681879581',
              apy: '0.02733268635250545031',
              lstApy: '0',
              grossApy: '0.02733268635250545031',
              borrowMin: '0',
              borrowCap: '90000',
              totalBorrow: '78015.535244821263653307',
            },
            {
              token: {
                chainId: 42161,
                address: '0xFd086bC7CD5C481DCC9C85ebE478A1C0b69FCbb9',
                decimals: 6,
                symbol: 'USDT',
                name: 'Tether USD',
                logoUri: 'https://cdn.furucombo.app/assets/img/token/USDT.svg',
              },
              price: '0.99971',
              balance: '0',
              apy: '0.08536994805966557939',
              lstApy: '0',
              grossApy: '0.08536994805966557939',
              borrowMin: '0',
              borrowCap: '120000000',
              totalBorrow: '63033577.377647',
            },
            {
              token: {
                chainId: 42161,
                address: '0x5979D7b546E38E414F7E9822514be443A4800529',
                decimals: 18,
                symbol: 'wstETH',
                name: 'Wrapped liquid staked Ether 2.0',
                logoUri: 'https://cdn.furucombo.app/assets/img/token/wstETH.png',
              },
              price: '3941.31693746',
              balance: '0',
              apy: '0.01181619615259605774',
              lstApy: '0.0302',
              grossApy: '-0.01838380384740394226',
              borrowMin: '0',
              borrowCap: '4800',
              totalBorrow: '3749.304244214890860355',
            },
            {
              token: {
                chainId: 42161,
                address: '0xEC70Dcb4A1EFa46b8F2D97C310C9c4790ba5ffA8',
                decimals: 18,
                symbol: 'rETH',
                name: 'Rocket Pool ETH',
                logoUri: 'https://cdn.furucombo.app/assets/img/token/rETH.svg',
              },
              price: '3735.11403295',
              balance: '0',
              apy: '0.00453136182072584484',
              lstApy: '0.0282',
              grossApy: '-0.02366863817927415516',
              borrowMin: '0',
              borrowCap: '1360',
              totalBorrow: '89.005379123164626804',
            },
            {
              token: {
                chainId: 42161,
                address: '0x93b346b6BC2548dA6A1E7d98E9a421B42541425b',
                decimals: 18,
                symbol: 'LUSD',
                name: 'LUSD Stablecoin',
                logoUri: 'https://cdn.furucombo.app/assets/img/token/LUSD.png',
              },
              price: '0.99785578',
              balance: '0',
              apy: '0.09201126573568981018',
              lstApy: '0',
              grossApy: '0.09201126573568981018',
              borrowMin: '0',
              borrowCap: '1800000',
              totalBorrow: '643840.638074885805936468',
            },
            {
              token: {
                chainId: 42161,
                address: '0xaf88d065e77c8cC2239327C5EDb3A432268e5831',
                decimals: 6,
                symbol: 'USDC',
                name: 'USD Coin',
                logoUri: 'https://cdn.furucombo.app/assets/img/token/USDC.svg',
              },
              price: '0.99998806',
              balance: '0',
              apy: '0.07813569893817514567',
              lstApy: '0',
              grossApy: '0.07813569893817514567',
              borrowMin: '0',
              borrowCap: '320000000',
              totalBorrow: '157432625.715443',
            },
            {
              token: {
                chainId: 42161,
                address: '0x17FC002b466eEc40DaE837Fc4bE5c67993ddBd6F',
                decimals: 18,
                symbol: 'FRAX',
                name: 'Frax',
                logoUri: 'https://cdn.furucombo.app/assets/img/token/FRAX.png',
              },
              price: '0.99765734',
              balance: '0',
              apy: '0.0899175620839348554',
              lstApy: '0',
              grossApy: '0.0899175620839348554',
              borrowMin: '0',
              borrowCap: '5500000',
              totalBorrow: '272603.186803783369296721',
            },
            {
              token: {
                chainId: 42161,
                address: '0x912CE59144191C1204E64559FE8253a0e49E6548',
                decimals: 18,
                symbol: 'ARB',
                name: 'Arbitrum',
                logoUri: 'https://cdn.furucombo.app/assets/img/token/ARB.svg',
              },
              price: '0.8058999',
              balance: '0',
              apy: '0.0368047453972033863',
              lstApy: '0',
              grossApy: '0.0368047453972033863',
              borrowMin: '0',
              borrowCap: '16500000',
              totalBorrow: '5461253.082004171774666716',
            },
            {
              token: {
                chainId: 42161,
                address: '0x35751007a407ca6FEFfE80b3cB397736D2cf4dbe',
                decimals: 18,
                symbol: 'weETH',
                name: 'Wrapped eETH',
                logoUri: 'https://cdn.furucombo.app/assets/img/token/weETH.webp',
              },
              price: '3505.74061167',
              balance: '0',
              apy: '0.04063440784213039755',
              lstApy: '0',
              grossApy: '0.04063440784213039755',
              borrowMin: '0',
              borrowCap: '25000',
              totalBorrow: '14339.143300487575428106',
            },
          ],
        },
      },
      {
        chainId: common.ChainId.optimism,
        account: '0x7b9CDCC6831796fCcB21b5f7241e2cEd813Efe92',
        blockTag: 113571686,
        expected: {
          chainId: 10,
          protocolId: 'aave-v3',
          marketId: 'optimism',
          utilization: '1',
          healthRate: '0.92207500097807484087',
          netAPY: '0.05171424874509312398',
          totalSupplyUSD: '7129880.78864845658706943890608614',
          totalBorrowUSD: '6185944.3373569923772633536008896',
          supplies: [
            {
              token: {
                chainId: 10,
                address: '0xDA10009cBd5D07dd0CeCc66161FC93D7c9000da1',
                decimals: 18,
                symbol: 'DAI',
                name: 'Dai Stablecoin',
              },
              price: '1.00002282',
              balance: '0',
              apy: '0.08029571572141981405',
              lstApy: '0',
              grossApy: '0.08029571572141981405',
              usageAsCollateralEnabled: true,
              ltv: '0.78',
              liquidationThreshold: '0.83',
              isNotCollateral: false,
              supplyCap: '25000000',
              totalSupply: '2585801.985637176281924099',
            },
            {
              token: {
                chainId: 10,
                address: '0x350a791Bfc2C21F9Ed5d10980Dad2e2638ffa7f6',
                decimals: 18,
                symbol: 'LINK',
                name: 'ChainLink Token',
              },
              price: '14.64277',
              balance: '0',
              apy: '0.00031629974871617226',
              lstApy: '0',
              grossApy: '0.00031629974871617226',
              usageAsCollateralEnabled: true,
              ltv: '0.7',
              liquidationThreshold: '0.75',
              isNotCollateral: false,
              supplyCap: '210000',
              totalSupply: '204117.456638770661150949',
            },
            {
              token: {
                chainId: 10,
                address: '0x8c6f28f2F1A3C87F0f938b96d27520d9751ec8d9',
                decimals: 18,
                symbol: 'sUSD',
                name: 'Synth sUSD',
              },
              price: '0.99889539',
              balance: '0',
              apy: '0.02912717500053536556',
              lstApy: '0',
              grossApy: '0.02912717500053536556',
              usageAsCollateralEnabled: true,
              ltv: '0.6',
              liquidationThreshold: '0.75',
              isNotCollateral: false,
              supplyCap: '20000000',
              totalSupply: '6281520.249974342500361567',
            },
            {
              token: {
                chainId: 10,
                address: '0x7F5c764cBc14f9669B88837ca1490cCa17c31607',
                decimals: 6,
                symbol: 'USDC.e',
                name: 'USD Coin (Bridged from Ethereum)',
              },
              price: '1.00000221',
              balance: '0',
              apy: '0.05478173148480717051',
              lstApy: '0',
              grossApy: '0.05478173148480717051',
              usageAsCollateralEnabled: true,
              ltv: '0.8',
              liquidationThreshold: '0.85',
              isNotCollateral: false,
              supplyCap: '25000000',
              totalSupply: '19231384.088047',
            },
            {
              token: {
                chainId: 10,
                address: '0x68f180fcCe6836688e9084f035309E29Bf0A2095',
                decimals: 8,
                symbol: 'WBTC',
                name: 'Wrapped BTC',
              },
              price: '42472.674242',
              balance: '0',
              apy: '0.0004181808344552407',
              lstApy: '0',
              grossApy: '0.0004181808344552407',
              usageAsCollateralEnabled: true,
              ltv: '0.73',
              liquidationThreshold: '0.78',
              isNotCollateral: false,
              supplyCap: '1200',
              totalSupply: '509.84485152',
            },
            {
              token: {
                chainId: 10,
                address: '0x94b008aA00579c1307B0EF2c499aD98a8ce58e58',
                decimals: 6,
                symbol: 'USDT',
                name: 'Tether USD',
              },
              price: '0.99976223',
              balance: '0',
              apy: '0.1155507491940290518',
              lstApy: '0',
              grossApy: '0.1155507491940290518',
              usageAsCollateralEnabled: false,
              ltv: '0.75',
              liquidationThreshold: '0.8',
              isNotCollateral: false,
              supplyCap: '25000000',
              totalSupply: '5923879.53636',
            },
            {
              token: {
                chainId: 10,
                address: '0x76FB31fb4af56892A25e32cFC43De717950c9278',
                decimals: 18,
                symbol: 'AAVE',
                name: 'Aave Token',
              },
              price: '107.3828',
              balance: '0',
              apy: '0',
              lstApy: '0',
              grossApy: '0',
              usageAsCollateralEnabled: true,
              ltv: '0.5',
              liquidationThreshold: '0.65',
              isNotCollateral: false,
              supplyCap: '45000',
              totalSupply: '4337.076855148333607792',
            },
            {
              token: {
                chainId: 10,
                address: '0x0000000000000000000000000000000000000000',
                decimals: 18,
                symbol: 'ETH',
                name: 'Ethereum',
              },
              price: '2253.0864232',
              balance: '0',
              apy: '0.01759972129931819265',
              lstApy: '0',
              grossApy: '0.01759972129931819265',
              usageAsCollateralEnabled: true,
              ltv: '0.8',
              liquidationThreshold: '0.825',
              isNotCollateral: false,
              supplyCap: '35900',
              totalSupply: '17312.435028802928656026',
            },
            {
              token: {
                chainId: 10,
                address: '0x1F32b1c2345538c0c6f582fCB022739c4A194Ebb',
                decimals: 18,
                symbol: 'wstETH',
                name: 'Wrapped liquid staked Ether 2.0',
              },
              price: '2591.60640163',
              balance: '2751.143377390985329378',
              apy: '0.00006280656369123281',
              lstApy: '0.0324',
              grossApy: '0.03246280656369123281',
              usageAsCollateralEnabled: true,
              ltv: '0.71',
              liquidationThreshold: '0.8',
              isNotCollateral: false,
              supplyCap: '34500',
              totalSupply: '19470.083054554338894097',
            },
            {
              token: {
                chainId: 10,
                address: '0x4200000000000000000000000000000000000042',
                decimals: 18,
                symbol: 'OP',
                name: 'Optimism',
              },
              price: '2.18156955',
              balance: '0',
              apy: '0.00033439753394630285',
              lstApy: '0',
              grossApy: '0.00033439753394630285',
              usageAsCollateralEnabled: true,
              ltv: '0.3',
              liquidationThreshold: '0.4',
              isNotCollateral: false,
              supplyCap: '10000000',
              totalSupply: '4580520.485436663242117524',
            },
            {
              token: {
                chainId: 10,
                address: '0x9Bcef72be871e61ED4fBbc7630889beE758eb81D',
                decimals: 18,
                symbol: 'rETH',
                name: 'Rocket Pool ETH',
              },
              price: '2461.68955583',
              balance: '0',
              apy: '0.00006157040312459567',
              lstApy: '0.0275',
              grossApy: '0.02756157040312459567',
              usageAsCollateralEnabled: true,
              ltv: '0.67',
              liquidationThreshold: '0.74',
              isNotCollateral: false,
              supplyCap: '6000',
              totalSupply: '576.352858191538500054',
            },
            {
              token: {
                chainId: 10,
                address: '0xc40F949F8a4e094D1b49a23ea9241D289B7b2819',
                decimals: 18,
                symbol: 'LUSD',
                name: 'LUSD Stablecoin',
              },
              price: '0.99939599',
              balance: '0',
              apy: '0.10086907307902019713',
              lstApy: '0',
              grossApy: '0.10086907307902019713',
              usageAsCollateralEnabled: false,
              ltv: '0',
              liquidationThreshold: '0',
              isNotCollateral: false,
              supplyCap: '3000000',
              totalSupply: '132938.933841075547543289',
            },
            {
              token: {
                chainId: 10,
                address: '0x0b2C639c533813f4Aa9D7837CAf62653d097Ff85',
                decimals: 6,
                symbol: 'USDC',
                name: 'USD Coin',
              },
              price: '1.00000221',
              balance: '0',
              apy: '0.14230125938934205202',
              lstApy: '0',
              grossApy: '0.14230125938934205202',
              usageAsCollateralEnabled: true,
              ltv: '0.8',
              liquidationThreshold: '0.85',
              isNotCollateral: false,
              supplyCap: '25000000',
              totalSupply: '1599300.085799',
            },
          ],
          borrows: [
            {
              token: {
                chainId: 10,
                address: '0xDA10009cBd5D07dd0CeCc66161FC93D7c9000da1',
                decimals: 18,
                symbol: 'DAI',
                name: 'Dai Stablecoin',
              },
              price: '1.00002282',
              balance: '0',
              apy: '0.10214629003321339804',
              lstApy: '0',
              grossApy: '0.10214629003321339804',
              borrowMin: '0',
              borrowCap: '16000000',
              totalBorrow: '2198806.672716259158323742',
            },
            {
              token: {
                chainId: 10,
                address: '0x350a791Bfc2C21F9Ed5d10980Dad2e2638ffa7f6',
                decimals: 18,
                symbol: 'LINK',
                name: 'ChainLink Token',
              },
              price: '14.64277',
              balance: '0',
              apy: '0.00787257455741770749',
              lstApy: '0',
              grossApy: '0.00787257455741770749',
              borrowMin: '0',
              borrowCap: '84000',
              totalBorrow: '10289.83331713380027938',
            },
            {
              token: {
                chainId: 10,
                address: '0x8c6f28f2F1A3C87F0f938b96d27520d9751ec8d9',
                decimals: 18,
                symbol: 'sUSD',
                name: 'Synth sUSD',
              },
              price: '0.99889539',
              balance: '0',
              apy: '0.04566415286176893977',
              lstApy: '0',
              grossApy: '0.04566415286176893977',
              borrowMin: '0',
              borrowCap: '13000000',
              totalBorrow: '4487774.83306114914761885',
            },
            {
              token: {
                chainId: 10,
                address: '0x7F5c764cBc14f9669B88837ca1490cCa17c31607',
                decimals: 6,
                symbol: 'USDC.e',
                name: 'USD Coin (Bridged from Ethereum)',
              },
              price: '1.00000221',
              balance: '0',
              apy: '0.078596936193978136',
              lstApy: '0',
              grossApy: '0.078596936193978136',
              borrowMin: '0',
              borrowCap: '20000000',
              totalBorrow: '16065042.364108',
            },
            {
              token: {
                chainId: 10,
                address: '0x68f180fcCe6836688e9084f035309E29Bf0A2095',
                decimals: 8,
                symbol: 'WBTC',
                name: 'Wrapped BTC',
              },
              price: '42472.674242',
              balance: '0',
              apy: '0.00683905789364176548',
              lstApy: '0',
              grossApy: '0.00683905789364176548',
              borrowMin: '0',
              borrowCap: '250',
              totalBorrow: '39.09363874',
            },
            {
              token: {
                chainId: 10,
                address: '0x94b008aA00579c1307B0EF2c499aD98a8ce58e58',
                decimals: 6,
                symbol: 'USDT',
                name: 'Tether USD',
              },
              price: '0.99976223',
              balance: '0',
              apy: '0.14946330461076310507',
              lstApy: '0',
              grossApy: '0.14946330461076310507',
              borrowMin: '0',
              borrowCap: '16000000',
              totalBorrow: '5008876.169012',
            },
            {
              token: {
                chainId: 10,
                address: '0x0000000000000000000000000000000000000000',
                decimals: 18,
                symbol: 'ETH',
                name: 'Ethereum',
              },
              price: '2253.0864232',
              balance: '2745.542414023895564728',
              apy: '0.02952515678478624892',
              lstApy: '0',
              grossApy: '0.02952515678478624892',
              borrowMin: '0',
              borrowCap: '19745',
              totalBorrow: '12212.252255057979726948',
            },
            {
              token: {
                chainId: 10,
                address: '0x1F32b1c2345538c0c6f582fCB022739c4A194Ebb',
                decimals: 18,
                symbol: 'wstETH',
                name: 'Wrapped liquid staked Ether 2.0',
              },
              price: '2591.60640163',
              balance: '0',
              apy: '0.00425087768018463859',
              lstApy: '0.0324',
              grossApy: '-0.02814912231981536141',
              borrowMin: '0',
              borrowCap: '1500',
              totalBorrow: '339.143213014800666487',
            },
            {
              token: {
                chainId: 10,
                address: '0x9Bcef72be871e61ED4fBbc7630889beE758eb81D',
                decimals: 18,
                symbol: 'rETH',
                name: 'Rocket Pool ETH',
              },
              price: '2461.68955583',
              balance: '0',
              apy: '0.00336234068910269273',
              lstApy: '0.0275',
              grossApy: '-0.02413765931089730727',
              borrowMin: '0',
              borrowCap: '720',
              totalBorrow: '12.437007329155728376',
            },
            {
              token: {
                chainId: 10,
                address: '0xc40F949F8a4e094D1b49a23ea9241D289B7b2819',
                decimals: 18,
                symbol: 'LUSD',
                name: 'LUSD Stablecoin',
              },
              price: '0.99939599',
              balance: '0',
              apy: '0.13934785921335083626',
              lstApy: '0',
              grossApy: '0.13934785921335083626',
              borrowMin: '0',
              borrowCap: '1210000',
              totalBorrow: '108812.761681151745153015',
            },
            {
              token: {
                chainId: 10,
                address: '0x0b2C639c533813f4Aa9D7837CAf62653d097Ff85',
                decimals: 6,
                symbol: 'USDC',
                name: 'USD Coin',
              },
              price: '1.00000221',
              balance: '0',
              apy: '0.17412319034353027801',
              lstApy: '0',
              grossApy: '0.17412319034353027801',
              borrowMin: '0',
              borrowCap: '20000000',
              totalBorrow: '1473203.598876',
            },
          ],
        },
      },
      {
        chainId: common.ChainId.avalanche,
        account: '0xf567361ff0bCDcAd1252c8E2Fb8e5d4a9bB4e266',
        blockTag: 39128043,
        expected: {
          chainId: 43114,
          protocolId: 'aave-v3',
          marketId: 'avalanche',
          utilization: '0.75992353673586861559',
          healthRate: '1.40587165388572483349',
          netAPY: '0.00470661909745758133',
          totalSupplyUSD: '2096544.2124297834856',
          totalBorrowUSD: '1135610.1168707633355002636817958',
          supplies: [
            {
              token: {
                chainId: 43114,
                address: '0xD24C2Ad096400B6FBcd2ad8B24E7acBc21A1da64',
                decimals: 18,
                symbol: 'FRAX',
                name: 'Frax',
              },
              price: '0.99923705',
              balance: '0',
              apy: '0.02405727775538844641',
              lstApy: '0',
              grossApy: '0.02405727775538844641',
              usageAsCollateralEnabled: false,
              ltv: '0.75',
              liquidationThreshold: '0.8',
              isNotCollateral: false,
              supplyCap: '1500000',
              totalSupply: '14344.725459106802371348',
            },
            {
              token: {
                chainId: 43114,
                address: '0xB97EF9Ef8734C71904D8002F8b6Bc66Dd9c48a6E',
                decimals: 6,
                symbol: 'USDC',
                name: 'USD Coin',
              },
              price: '1.0002524',
              balance: '214291.813654',
              apy: '0.11245319633282759276',
              lstApy: '0',
              grossApy: '0.11245319633282759276',
              usageAsCollateralEnabled: true,
              ltv: '0.825',
              liquidationThreshold: '0.8625',
              isNotCollateral: false,
              supplyCap: '170000000',
              totalSupply: '35596545.103386',
            },
            {
              token: {
                chainId: 43114,
                address: '0x9702230A8Ea53601f5cD2dc00fDBc13d4dF4A8c7',
                decimals: 6,
                symbol: 'USDt',
                name: 'TetherToken',
              },
              price: '0.9998278',
              balance: '0',
              apy: '0.10990662301331500012',
              lstApy: '0',
              grossApy: '0.10990662301331500012',
              usageAsCollateralEnabled: true,
              ltv: '0.75',
              liquidationThreshold: '0.81',
              isNotCollateral: false,
              supplyCap: '100000000',
              totalSupply: '18138699.03353',
            },
            {
              token: {
                chainId: 43114,
                address: '0x152b9d0FdC40C096757F570A51E494bd4b943E50',
                decimals: 8,
                symbol: 'BTC.b',
                name: 'Bitcoin',
              },
              price: '42540.80155',
              balance: '44.24454272',
              apy: '0.00018399211774211181',
              lstApy: '0',
              grossApy: '0.00018399211774211181',
              usageAsCollateralEnabled: true,
              ltv: '0.7',
              liquidationThreshold: '0.75',
              isNotCollateral: false,
              supplyCap: '3000',
              totalSupply: '1130.70421247',
            },
            {
              token: {
                chainId: 43114,
                address: '0xd586E7F844cEa2F87f50152665BCbc2C279D8d70',
                decimals: 18,
                symbol: 'DAI.e',
                name: 'Dai Stablecoin',
              },
              price: '1',
              balance: '0',
              apy: '0.04475631358170004319',
              lstApy: '0',
              grossApy: '0.04475631358170004319',
              usageAsCollateralEnabled: true,
              ltv: '0.75',
              liquidationThreshold: '0.82',
              isNotCollateral: false,
              supplyCap: '17000000',
              totalSupply: '3901798.540779609997176857',
            },
            {
              token: {
                chainId: 43114,
                address: '0x5947BB275c521040051D82396192181b413227A3',
                decimals: 18,
                symbol: 'LINK.e',
                name: 'Chainlink Token',
              },
              price: '14.58823',
              balance: '0',
              apy: '0.00110636904532698615',
              lstApy: '0',
              grossApy: '0.00110636904532698615',
              usageAsCollateralEnabled: true,
              ltv: '0.56',
              liquidationThreshold: '0.71',
              isNotCollateral: false,
              supplyCap: '440000',
              totalSupply: '203693.157085879217474773',
            },
            {
              token: {
                chainId: 43114,
                address: '0x50b7545627a5162F82A992c33b87aDc75187B218',
                decimals: 8,
                symbol: 'WBTC.e',
                name: 'Wrapped BTC',
              },
              price: '42540.80155',
              balance: '0',
              apy: '0.00008002157304503949',
              lstApy: '0',
              grossApy: '0.00008002157304503949',
              usageAsCollateralEnabled: true,
              ltv: '0.7',
              liquidationThreshold: '0.75',
              isNotCollateral: false,
              supplyCap: '2000',
              totalSupply: '673.8230531',
            },
            {
              token: {
                chainId: 43114,
                address: '0x49D5c2BdFfac6CE2BFdB6640F4F80f226bc10bAB',
                decimals: 18,
                symbol: 'WETH.e',
                name: 'Wrapped Ether',
              },
              price: '2255.12839519',
              balance: '0',
              apy: '0.00230482557632344167',
              lstApy: '0',
              grossApy: '0.00230482557632344167',
              usageAsCollateralEnabled: true,
              ltv: '0.8',
              liquidationThreshold: '0.825',
              isNotCollateral: false,
              supplyCap: '38000',
              totalSupply: '14092.062663932627078843',
            },
            {
              token: {
                chainId: 43114,
                address: '0x2b2C81e08f1Af8835a78Bb2A90AE924ACE0eA4bE',
                decimals: 18,
                symbol: 'sAVAX',
                name: 'Staked AVAX',
              },
              price: '50.1216625',
              balance: '0',
              apy: '0',
              lstApy: '0.0576',
              grossApy: '0.0576',
              usageAsCollateralEnabled: true,
              ltv: '0.3',
              liquidationThreshold: '0.4',
              isNotCollateral: false,
              supplyCap: '2200000',
              totalSupply: '1261669.28668257238781593',
            },
            {
              token: {
                chainId: 43114,
                address: '0x63a72806098Bd3D9520cC43356dD78afe5D386D9',
                decimals: 18,
                symbol: 'AAVE.e',
                name: 'Aave Token',
              },
              price: '107.31447',
              balance: '0',
              apy: '0',
              lstApy: '0',
              grossApy: '0',
              usageAsCollateralEnabled: true,
              ltv: '0.6',
              liquidationThreshold: '0.713',
              isNotCollateral: false,
              supplyCap: '5800',
              totalSupply: '3804.749540939523419669',
            },
            {
              token: {
                chainId: 43114,
                address: '0x0000000000000000000000000000000000000000',
                decimals: 18,
                symbol: 'AVAX',
                name: 'Avalanche',
              },
              price: '44.7',
              balance: '0',
              apy: '0.01601086886712040041',
              lstApy: '0',
              grossApy: '0.01601086886712040041',
              usageAsCollateralEnabled: true,
              ltv: '0.68',
              liquidationThreshold: '0.73',
              isNotCollateral: false,
              supplyCap: '5700000',
              totalSupply: '3018830.056769793051460555',
            },
            {
              token: {
                chainId: 43114,
                address: '0x5c49b268c9841AFF1Cc3B0a418ff5c3442eE3F3b',
                decimals: 18,
                symbol: 'MAI',
                name: 'Mai Stablecoin',
              },
              price: '0.86985096',
              balance: '0',
              apy: '0.0134362920070027044',
              lstApy: '0',
              grossApy: '0.0134362920070027044',
              usageAsCollateralEnabled: false,
              ltv: '0',
              liquidationThreshold: '0.01',
              isNotCollateral: false,
              supplyCap: '20000',
              totalSupply: '15422.625909218799074612',
            },
          ],
          borrows: [
            {
              token: {
                chainId: 43114,
                address: '0xD24C2Ad096400B6FBcd2ad8B24E7acBc21A1da64',
                decimals: 18,
                symbol: 'FRAX',
                name: 'Frax',
              },
              price: '0.99923705',
              balance: '0',
              apy: '0.0390503021725579184',
              lstApy: '0',
              grossApy: '0.0390503021725579184',
              borrowMin: '0',
              borrowCap: '1000000',
              totalBorrow: '9891.288478520892757229',
            },
            {
              token: {
                chainId: 43114,
                address: '0xB97EF9Ef8734C71904D8002F8b6Bc66Dd9c48a6E',
                decimals: 6,
                symbol: 'USDC',
                name: 'USD Coin',
              },
              price: '1.0002524',
              balance: '0',
              apy: '0.14104271614818463309',
              lstApy: '0',
              grossApy: '0.14104271614818463309',
              borrowMin: '0',
              borrowCap: '90000000',
              totalBorrow: '31584636.255854',
            },
            {
              token: {
                chainId: 43114,
                address: '0x9702230A8Ea53601f5cD2dc00fDBc13d4dF4A8c7',
                decimals: 6,
                symbol: 'USDt',
                name: 'TetherToken',
              },
              price: '0.9998278',
              balance: '0',
              apy: '0.13984284203255391256',
              lstApy: '0',
              grossApy: '0.13984284203255391256',
              borrowMin: '0',
              borrowCap: '80000000',
              totalBorrow: '15730502.202033',
            },
            {
              token: {
                chainId: 43114,
                address: '0x152b9d0FdC40C096757F570A51E494bd4b943E50',
                decimals: 8,
                symbol: 'BTC.b',
                name: 'Bitcoin',
              },
              price: '42540.80155',
              balance: '0',
              apy: '0.00599897178397704241',
              lstApy: '0',
              grossApy: '0.00599897178397704241',
              borrowMin: '0',
              borrowCap: '900',
              totalBorrow: '43.47547942',
            },
            {
              token: {
                chainId: 43114,
                address: '0xd586E7F844cEa2F87f50152665BCbc2C279D8d70',
                decimals: 18,
                symbol: 'DAI.e',
                name: 'Dai Stablecoin',
              },
              price: '1',
              balance: '0',
              apy: '0.05550240589399468333',
              lstApy: '0',
              grossApy: '0.05550240589399468333',
              borrowMin: '0',
              borrowCap: '17000000',
              totalBorrow: '3510006.154146261003561298',
            },
            {
              token: {
                chainId: 43114,
                address: '0x5947BB275c521040051D82396192181b413227A3',
                decimals: 18,
                symbol: 'LINK.e',
                name: 'Chainlink Token',
              },
              price: '14.58823',
              balance: '0',
              apy: '0.0147711962077648869',
              lstApy: '0',
              grossApy: '0.0147711962077648869',
              borrowMin: '0',
              borrowCap: '220000',
              totalBorrow: '19201.044046325368603457',
            },
            {
              token: {
                chainId: 43114,
                address: '0x50b7545627a5162F82A992c33b87aDc75187B218',
                decimals: 8,
                symbol: 'WBTC.e',
                name: 'Wrapped BTC',
              },
              price: '42540.80155',
              balance: '0',
              apy: '0.00298621616953280854',
              lstApy: '0',
              grossApy: '0.00298621616953280854',
              borrowMin: '0',
              borrowCap: '1100',
              totalBorrow: '22.60332888',
            },
            {
              token: {
                chainId: 43114,
                address: '0x49D5c2BdFfac6CE2BFdB6640F4F80f226bc10bAB',
                decimals: 18,
                symbol: 'WETH.e',
                name: 'Wrapped Ether',
              },
              price: '2255.12839519',
              balance: '503.56783201033014682',
              apy: '0.01754778358317233615',
              lstApy: '0',
              grossApy: '0.01754778358317233615',
              borrowMin: '0',
              borrowCap: '20500',
              totalBorrow: '2194.093601314743311969',
            },
            {
              token: {
                chainId: 43114,
                address: '0x0000000000000000000000000000000000000000',
                decimals: 18,
                symbol: 'AVAX',
                name: 'Avalanche',
              },
              price: '44.7',
              balance: '0',
              apy: '0.04424966051329394784',
              lstApy: '0',
              grossApy: '0.04424966051329394784',
              borrowMin: '0',
              borrowCap: '3600000',
              totalBorrow: '1384331.257203353233737012',
            },
            {
              token: {
                chainId: 43114,
                address: '0x5c49b268c9841AFF1Cc3B0a418ff5c3442eE3F3b',
                decimals: 18,
                symbol: 'MAI',
                name: 'Mai Stablecoin',
              },
              price: '0.86985096',
              balance: '0',
              apy: '0.65053507775964222215',
              lstApy: '0',
              grossApy: '0.65053507775964222215',
              borrowMin: '0',
              borrowCap: '10000',
              totalBorrow: '8318.143695300422730107',
            },
          ],
        },
      },
      {
        chainId: common.ChainId.metis,
        account: '0x6859dA14835424957a1E6B397D8026B1D9fF7e1E',
        blockTag: 17000000,
        expected: {
          chainId: 1088,
          protocolId: 'aave-v3',
          marketId: 'metis',
          utilization: '0.99909751218653930308',
          healthRate: '1.05472859140437163989',
          netAPY: '-0.00798447531539906177',
          totalSupplyUSD: '7120116.45922664748192',
          totalBorrowUSD: '5609952.94820009350092',
          supplies: [
            {
              token: {
                chainId: 1088,
                address: '0x4c078361FC9BbB78DF910800A991C7c3DD2F6ce0',
                decimals: 18,
                symbol: 'm.DAI',
                name: 'DAI Token',
                logoUri: 'https://cdn.furucombo.app/assets/img/token/DAI.png',
              },
              price: '0.99979847',
              balance: '0',
              apy: '0.07686739216443117104',
              lstApy: '0',
              grossApy: '0.07686739216443117104',
              usageAsCollateralEnabled: true,
              ltv: '0.63',
              liquidationThreshold: '0.77',
              isNotCollateral: false,
              supplyCap: '1240000',
              totalSupply: '791772.828254762449943579',
            },
            {
              token: {
                chainId: 1088,
                address: '0xDeadDeAddeAddEAddeadDEaDDEAdDeaDDeAD0000',
                decimals: 18,
                symbol: 'METIS(ERC20)',
                name: 'Metis ERC20',
                logoUri: 'https://cdn.furucombo.app/assets/img/token/METIS.svg',
              },
              price: '61.64469171',
              balance: '0',
              apy: '0.00002427458317697214',
              lstApy: '0',
              grossApy: '0.00002427458317697214',
              usageAsCollateralEnabled: false,
              ltv: '0',
              liquidationThreshold: '0',
              isNotCollateral: false,
              supplyCap: '600000',
              totalSupply: '251948.236280438640969547',
            },
            {
              token: {
                chainId: 1088,
                address: '0xEA32A96608495e54156Ae48931A7c20f0dcc1a21',
                decimals: 6,
                symbol: 'm.USDC',
                name: 'USDC Token',
                logoUri: 'https://cdn.furucombo.app/assets/img/token/USDC.svg',
              },
              price: '0.99999713',
              balance: '4417704.749184',
              apy: '0.04232103994685542949',
              lstApy: '0',
              grossApy: '0.04232103994685542949',
              usageAsCollateralEnabled: true,
              ltv: '0.8',
              liquidationThreshold: '0.85',
              isNotCollateral: false,
              supplyCap: '14500000',
              totalSupply: '11518899.661039',
            },
            {
              token: {
                chainId: 1088,
                address: '0xbB06DCA3AE6887fAbF931640f67cab3e3a16F4dC',
                decimals: 6,
                symbol: 'm.USDT',
                name: 'USDT Token',
                logoUri: 'https://cdn.furucombo.app/assets/img/token/USDT.svg',
              },
              price: '0.99966',
              balance: '2703343.525654',
              apy: '0.04853454160748589713',
              lstApy: '0',
              grossApy: '0.04853454160748589713',
              usageAsCollateralEnabled: true,
              ltv: '0.77',
              liquidationThreshold: '0.8',
              isNotCollateral: false,
              supplyCap: '12000000',
              totalSupply: '8205168.81531',
            },
            {
              token: {
                chainId: 1088,
                address: '0x420000000000000000000000000000000000000A',
                decimals: 18,
                symbol: 'WETH',
                name: 'Ether',
                logoUri: 'https://cdn.furucombo.app/assets/img/token/WETH.svg',
              },
              price: '3031.03483831',
              balance: '0',
              apy: '0.00150594498067634552',
              lstApy: '0',
              grossApy: '0.00150594498067634552',
              usageAsCollateralEnabled: true,
              ltv: '0.8',
              liquidationThreshold: '0.825',
              isNotCollateral: false,
              supplyCap: '1800',
              totalSupply: '1507.929756759060691014',
            },
          ],
          borrows: [
            {
              token: {
                chainId: 1088,
                address: '0x4c078361FC9BbB78DF910800A991C7c3DD2F6ce0',
                decimals: 18,
                symbol: 'm.DAI',
                name: 'DAI Token',
                logoUri: 'https://cdn.furucombo.app/assets/img/token/DAI.png',
              },
              price: '0.99979847',
              balance: '0',
              apy: '0.12901999840775093085',
              lstApy: '0',
              grossApy: '0.12901999840775093085',
              borrowMin: '0',
              borrowCap: '1110000',
              totalBorrow: '647863.500346221036907754',
            },
            {
              token: {
                chainId: 1088,
                address: '0xDeadDeAddeAddEAddeadDEaDDEAdDeaDDeAD0000',
                decimals: 18,
                symbol: 'METIS(ERC20)',
                name: 'Metis ERC20',
                logoUri: 'https://cdn.furucombo.app/assets/img/token/METIS.svg',
              },
              price: '61.64469171',
              balance: '0',
              apy: '0.00210991186613756314',
              lstApy: '0',
              grossApy: '0.00210991186613756314',
              borrowMin: '0',
              borrowCap: '32000',
              totalBorrow: '3413.804675599478583504',
            },
            {
              token: {
                chainId: 1088,
                address: '0xEA32A96608495e54156Ae48931A7c20f0dcc1a21',
                decimals: 6,
                symbol: 'm.USDC',
                name: 'USDC Token',
                logoUri: 'https://cdn.furucombo.app/assets/img/token/USDC.svg',
              },
              price: '0.99999713',
              balance: '3014469.305484',
              apy: '0.05697485744797950244',
              lstApy: '0',
              grossApy: '0.05697485744797950244',
              borrowMin: '0',
              borrowCap: '13000000',
              totalBorrow: '9587263.843333',
            },
            {
              token: {
                chainId: 1088,
                address: '0xbB06DCA3AE6887fAbF931640f67cab3e3a16F4dC',
                decimals: 6,
                symbol: 'm.USDT',
                name: 'USDT Token',
                logoUri: 'https://cdn.furucombo.app/assets/img/token/USDT.svg',
              },
              price: '0.99966',
              balance: '2596375.061764',
              apy: '0.06104107845388223526',
              lstApy: '0',
              grossApy: '0.06104107845388223526',
              borrowMin: '0',
              borrowCap: '11000000',
              totalBorrow: '7306911.332526',
            },
            {
              token: {
                chainId: 1088,
                address: '0x420000000000000000000000000000000000000A',
                decimals: 18,
                symbol: 'WETH',
                name: 'Ether',
                logoUri: 'https://cdn.furucombo.app/assets/img/token/WETH.svg',
              },
              price: '3031.03483831',
              balance: '0',
              apy: '0.01556461919948366662',
              lstApy: '0',
              grossApy: '0.01556461919948366662',
              borrowMin: '0',
              borrowCap: '720',
              totalBorrow: '172.887582749427035671',
            },
          ],
        },
      },
    ];

    testCases.forEach(({ chainId, account, blockTag, expected }) => {
      it(`${common.toNetworkId(chainId)} market`, async function () {
        const protocol = await LendingProtocol.createProtocol(chainId);

        protocol.setBlockTag(blockTag);
        const _portfolio = await protocol.getPortfolio(account);
        const portfolio: Portfolio = JSON.parse(JSON.stringify(_portfolio));

        const filteredPortfolio = filterPortfolio(portfolio);
        const filteredExpected = filterPortfolio(expected);

        expect(filteredPortfolio).to.deep.equal(filteredExpected);
      }).timeout(30000);
    });
  });
});
